*;
*MEAN-MAX-MIN-MEDIAN-MIDRANGE AND ROBUST ESTIMATES;
*;
label IMP_DONOR_AGE = 'Imputed DONOR_AGE';
IMP_DONOR_AGE = DONOR_AGE;
if missing(DONOR_AGE) then IMP_DONOR_AGE = 60;
label IMP_MONTHS_SINCE_LAST_PROM_RESP = 'Imputed MONTHS_SINCE_LAST_PROM_RESP';
IMP_MONTHS_SINCE_LAST_PROM_RESP = MONTHS_SINCE_LAST_PROM_RESP;
if missing(MONTHS_SINCE_LAST_PROM_RESP) then IMP_MONTHS_SINCE_LAST_PROM_RESP = 18;
*;
* TREE IMPUTATION;
*;
*;
* IMPUTE VARIABLE: INCOME_GROUP;
*;
label IMP_INCOME_GROUP = 'Imputed INCOME_GROUP';
IMP_INCOME_GROUP = INCOME_GROUP;
if missing(IMP_INCOME_GROUP) then do;
****************************************************************;
****** DECISION TREE SCORING CODE ******;
****************************************************************;
****** LENGTHS OF NEW CHARACTER VARIABLES ******;
LENGTH I_INCOME_GROUP $ 12;
LENGTH _WARN_ $ 4;
****** LABELS FOR NEW VARIABLES ******;
LABEL P_INCOME_GROUP2 = 'Predicted: INCOME_GROUP=2';
LABEL P_INCOME_GROUP6 = 'Predicted: INCOME_GROUP=6';
LABEL P_INCOME_GROUP5 = 'Predicted: INCOME_GROUP=5';
LABEL P_INCOME_GROUP4 = 'Predicted: INCOME_GROUP=4';
LABEL P_INCOME_GROUP3 = 'Predicted: INCOME_GROUP=3';
LABEL P_INCOME_GROUP1 = 'Predicted: INCOME_GROUP=1';
LABEL P_INCOME_GROUP7 = 'Predicted: INCOME_GROUP=7';
LABEL Q_INCOME_GROUP2 = 'Unadjusted P: INCOME_GROUP=2';
LABEL Q_INCOME_GROUP6 = 'Unadjusted P: INCOME_GROUP=6';
LABEL Q_INCOME_GROUP5 = 'Unadjusted P: INCOME_GROUP=5';
LABEL Q_INCOME_GROUP4 = 'Unadjusted P: INCOME_GROUP=4';
LABEL Q_INCOME_GROUP3 = 'Unadjusted P: INCOME_GROUP=3';
LABEL Q_INCOME_GROUP1 = 'Unadjusted P: INCOME_GROUP=1';
LABEL Q_INCOME_GROUP7 = 'Unadjusted P: INCOME_GROUP=7';
LABEL I_INCOME_GROUP = 'Into: INCOME_GROUP';
LABEL U_INCOME_GROUP = 'Unnormalized Into: INCOME_GROUP';
LABEL _WARN_ = 'Warnings';
****** TEMPORARY VARIABLES FOR FORMATTED VALUES ******;
LENGTH _ARBFMT_12 $ 12;
DROP _ARBFMT_12;
_ARBFMT_12 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_2 $ 2;
DROP _ARBFMT_2;
_ARBFMT_2 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_3 $ 3;
DROP _ARBFMT_3;
_ARBFMT_3 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_1 $ 1;
DROP _ARBFMT_1;
_ARBFMT_1 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_4 $ 4;
DROP _ARBFMT_4;
_ARBFMT_4 = ' ';
/* Initialize to avoid warning. */
****** ASSIGN OBSERVATION TO NODE ******;
DROP _BRANCH_;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 432.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
432.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('.' ,'04' ,'49' ,'50' ,'45' ,'20' ,'16' ,'30' ,'07' ,
'23' ,'25' ,'01' ,'09' ,'41' ,'15' ,'18' ,'36' ,'48' ,'08' ,'19' ,'27' ,
'46' ,'40' ,'26' ,'28' ,'21' ,'51' ,'34' ,'42' ,'44' ,'29' ,'05' ,'17' ,
'43' ,'39' ,'11' ,'31' ,'33' ,'38' ,'47' ,'53' ,'22' ,'06' ,'32' ,'03' ,
'52' ,'37' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('02' ,'24' ,'12' ,'35' ,'13' ,'14' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 19185.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 19185.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
_ARBFMT_3 = PUT( HOME_OWNER , $3.);
%DMNORMIP( _ARBFMT_3);
IF _ARBFMT_3 IN ('H' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_3 IN ('U' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(FILE_AVG_GIFT ) THEN DO;
IF 2.7 <= FILE_AVG_GIFT THEN DO;
_BRANCH_ = 1;
END;
ELSE IF FILE_AVG_GIFT < 2.7 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_AVG_GIFT_AMT ) THEN DO;
IF 2.7 <= LIFETIME_AVG_GIFT_AMT THEN DO;
_BRANCH_ = 1;
END;
ELSE IF LIFETIME_AVG_GIFT_AMT < 2.7 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.10574018126888;
P_INCOME_GROUP6 = 0.13897280966767;
P_INCOME_GROUP5 = 0.29003021148036;
P_INCOME_GROUP4 = 0.16012084592145;
P_INCOME_GROUP3 = 0.07552870090634;
P_INCOME_GROUP1 = 0.13293051359516;
P_INCOME_GROUP7 = 0.09667673716012;
Q_INCOME_GROUP2 = 0.10574018126888;
Q_INCOME_GROUP6 = 0.13897280966767;
Q_INCOME_GROUP5 = 0.29003021148036;
Q_INCOME_GROUP4 = 0.16012084592145;
Q_INCOME_GROUP3 = 0.07552870090634;
Q_INCOME_GROUP1 = 0.13293051359516;
Q_INCOME_GROUP7 = 0.09667673716012;
I_INCOME_GROUP = '5';
U_INCOME_GROUP = 5;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 531.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
531.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 20802 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 20802 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 1183 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 1183 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('1' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('2' ,'3' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('23' ,'01' ,'02' ,'24' ,'12' ,'35' ,'13' ,'14' ,
'34' ,'11' ,'03' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('18' ,'27' ,'40' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_ATTRIBUTE2 ) THEN DO;
IF 8.5 <= PCT_ATTRIBUTE2 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PCT_ATTRIBUTE2 < 8.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.1;
P_INCOME_GROUP6 = 0.21666666666666;
P_INCOME_GROUP5 = 0.28333333333333;
P_INCOME_GROUP4 = 0.11666666666666;
P_INCOME_GROUP3 = 0.08333333333333;
P_INCOME_GROUP1 = 0.01666666666666;
P_INCOME_GROUP7 = 0.18333333333333;
Q_INCOME_GROUP2 = 0.1;
Q_INCOME_GROUP6 = 0.21666666666666;
Q_INCOME_GROUP5 = 0.28333333333333;
Q_INCOME_GROUP4 = 0.11666666666666;
Q_INCOME_GROUP3 = 0.08333333333333;
Q_INCOME_GROUP1 = 0.01666666666666;
Q_INCOME_GROUP7 = 0.18333333333333;
I_INCOME_GROUP = '5';
U_INCOME_GROUP = 5;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
MEDIAN_HOME_VALUE < 2637.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
2637.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('24' ,'12' ,'35' ,'14' ,'34' ,'11' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('23' ,'01' ,'02' ,'13' ,'03' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 33325 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 33325 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0;
P_INCOME_GROUP6 = 0.47037037037037;
P_INCOME_GROUP5 = 0.13333333333333;
P_INCOME_GROUP4 = 0.06666666666666;
P_INCOME_GROUP3 = 0.01481481481481;
P_INCOME_GROUP1 = 0.01111111111111;
P_INCOME_GROUP7 = 0.3037037037037;
Q_INCOME_GROUP2 = 0;
Q_INCOME_GROUP6 = 0.47037037037037;
Q_INCOME_GROUP5 = 0.13333333333333;
Q_INCOME_GROUP4 = 0.06666666666666;
Q_INCOME_GROUP3 = 0.01481481481481;
Q_INCOME_GROUP1 = 0.01111111111111;
Q_INCOME_GROUP7 = 0.3037037037037;
I_INCOME_GROUP = '6';
U_INCOME_GROUP = 6;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.00921658986175;
P_INCOME_GROUP6 = 0.19585253456221;
P_INCOME_GROUP5 = 0.22811059907834;
P_INCOME_GROUP4 = 0.08294930875576;
P_INCOME_GROUP3 = 0.02764976958525;
P_INCOME_GROUP1 = 0.00691244239631;
P_INCOME_GROUP7 = 0.44930875576036;
Q_INCOME_GROUP2 = 0.00921658986175;
Q_INCOME_GROUP6 = 0.19585253456221;
Q_INCOME_GROUP5 = 0.22811059907834;
Q_INCOME_GROUP4 = 0.08294930875576;
Q_INCOME_GROUP3 = 0.02764976958525;
Q_INCOME_GROUP1 = 0.00691244239631;
Q_INCOME_GROUP7 = 0.44930875576036;
I_INCOME_GROUP = '7';
U_INCOME_GROUP = 7;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
MEDIAN_HOME_VALUE < 1117.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
1117.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 18546 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 18546 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_OWNER_OCCUPIED ) THEN DO;
IF 84.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PCT_OWNER_OCCUPIED < 84.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(DONOR_AGE ) AND
DONOR_AGE < 73.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(DONOR_AGE ) AND
73.5 <= DONOR_AGE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(NUMBER_PROM_12 ) THEN DO;
IF NUMBER_PROM_12 < 30.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 30.5 <= NUMBER_PROM_12 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MOR_HIT_RATE ) THEN DO;
IF MOR_HIT_RATE < 41.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 41.5 <= MOR_HIT_RATE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.21875;
P_INCOME_GROUP6 = 0.125;
P_INCOME_GROUP5 = 0.171875;
P_INCOME_GROUP4 = 0.21875;
P_INCOME_GROUP3 = 0.140625;
P_INCOME_GROUP1 = 0.0625;
P_INCOME_GROUP7 = 0.0625;
Q_INCOME_GROUP2 = 0.21875;
Q_INCOME_GROUP6 = 0.125;
Q_INCOME_GROUP5 = 0.171875;
Q_INCOME_GROUP4 = 0.21875;
Q_INCOME_GROUP3 = 0.140625;
Q_INCOME_GROUP1 = 0.0625;
Q_INCOME_GROUP7 = 0.0625;
I_INCOME_GROUP = '2';
U_INCOME_GROUP = 2;
END;
ELSE DO;
IF NOT MISSING(PCT_ATTRIBUTE4 ) AND
61 <= PCT_ATTRIBUTE4 THEN DO;
P_INCOME_GROUP2 = 0.5;
P_INCOME_GROUP6 = 0;
P_INCOME_GROUP5 = 0.33333333333333;
P_INCOME_GROUP4 = 0;
P_INCOME_GROUP3 = 0;
P_INCOME_GROUP1 = 0.16666666666666;
P_INCOME_GROUP7 = 0;
Q_INCOME_GROUP2 = 0.5;
Q_INCOME_GROUP6 = 0;
Q_INCOME_GROUP5 = 0.33333333333333;
Q_INCOME_GROUP4 = 0;
Q_INCOME_GROUP3 = 0;
Q_INCOME_GROUP1 = 0.16666666666666;
Q_INCOME_GROUP7 = 0;
I_INCOME_GROUP = '2';
U_INCOME_GROUP = 2;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.0258064516129;
P_INCOME_GROUP6 = 0.17419354838709;
P_INCOME_GROUP5 = 0.36129032258064;
P_INCOME_GROUP4 = 0.2258064516129;
P_INCOME_GROUP3 = 0.06774193548387;
P_INCOME_GROUP1 = 0.01290322580645;
P_INCOME_GROUP7 = 0.13225806451612;
Q_INCOME_GROUP2 = 0.0258064516129;
Q_INCOME_GROUP6 = 0.17419354838709;
Q_INCOME_GROUP5 = 0.36129032258064;
Q_INCOME_GROUP4 = 0.2258064516129;
Q_INCOME_GROUP3 = 0.06774193548387;
Q_INCOME_GROUP1 = 0.01290322580645;
Q_INCOME_GROUP7 = 0.13225806451612;
I_INCOME_GROUP = '5';
U_INCOME_GROUP = 5;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_12 = PUT( WEALTH_RATING , BEST12.);
%DMNORMIP( _ARBFMT_12);
IF _ARBFMT_12 IN ('4' ,'5' ,'7' ,'6' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_12 IN ('9' ,'8' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 22944.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 22944.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF 1404 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 1;
END;
ELSE IF MEDIAN_HOME_VALUE < 1404 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.04790419161676;
P_INCOME_GROUP6 = 0.14371257485029;
P_INCOME_GROUP5 = 0.17365269461077;
P_INCOME_GROUP4 = 0.1377245508982;
P_INCOME_GROUP3 = 0.05389221556886;
P_INCOME_GROUP1 = 0.01796407185628;
P_INCOME_GROUP7 = 0.4251497005988;
Q_INCOME_GROUP2 = 0.04790419161676;
Q_INCOME_GROUP6 = 0.14371257485029;
Q_INCOME_GROUP5 = 0.17365269461077;
Q_INCOME_GROUP4 = 0.1377245508982;
Q_INCOME_GROUP3 = 0.05389221556886;
Q_INCOME_GROUP1 = 0.01796407185628;
Q_INCOME_GROUP7 = 0.4251497005988;
I_INCOME_GROUP = '7';
U_INCOME_GROUP = 7;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 504.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
504.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_CARD_PROM ) THEN DO;
IF 4.5 <= LIFETIME_CARD_PROM THEN DO;
_BRANCH_ = 1;
END;
ELSE IF LIFETIME_CARD_PROM < 4.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_GIFT_RANGE ) THEN DO;
IF LIFETIME_GIFT_RANGE < 41 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 41 <= LIFETIME_GIFT_RANGE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.03846153846153;
P_INCOME_GROUP6 = 0.26923076923076;
P_INCOME_GROUP5 = 0.07692307692307;
P_INCOME_GROUP4 = 0.07692307692307;
P_INCOME_GROUP3 = 0.09615384615384;
P_INCOME_GROUP1 = 0;
P_INCOME_GROUP7 = 0.44230769230769;
Q_INCOME_GROUP2 = 0.03846153846153;
Q_INCOME_GROUP6 = 0.26923076923076;
Q_INCOME_GROUP5 = 0.07692307692307;
Q_INCOME_GROUP4 = 0.07692307692307;
Q_INCOME_GROUP3 = 0.09615384615384;
Q_INCOME_GROUP1 = 0;
Q_INCOME_GROUP7 = 0.44230769230769;
I_INCOME_GROUP = '7';
U_INCOME_GROUP = 7;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.04395604395604;
P_INCOME_GROUP6 = 0.34065934065934;
P_INCOME_GROUP5 = 0.21978021978021;
P_INCOME_GROUP4 = 0.19780219780219;
P_INCOME_GROUP3 = 0.08791208791208;
P_INCOME_GROUP1 = 0.01648351648351;
P_INCOME_GROUP7 = 0.09340659340659;
Q_INCOME_GROUP2 = 0.04395604395604;
Q_INCOME_GROUP6 = 0.34065934065934;
Q_INCOME_GROUP5 = 0.21978021978021;
Q_INCOME_GROUP4 = 0.19780219780219;
Q_INCOME_GROUP3 = 0.08791208791208;
Q_INCOME_GROUP1 = 0.01648351648351;
Q_INCOME_GROUP7 = 0.09340659340659;
I_INCOME_GROUP = '6';
U_INCOME_GROUP = 6;
END;
END;
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_3 = PUT( HOME_OWNER , $3.);
%DMNORMIP( _ARBFMT_3);
IF _ARBFMT_3 IN ('H' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_3 IN ('U' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(OVERLAY_SOURCE ) THEN DO;
_ARBFMT_1 = PUT( OVERLAY_SOURCE , $1.);
%DMNORMIP( _ARBFMT_1);
IF _ARBFMT_1 IN ('P' ,'B' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_1 IN ('M' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('.' ,'04' ,'49' ,'50' ,'20' ,'16' ,'30' ,'07' ,'23' ,
'25' ,'09' ,'02' ,'41' ,'15' ,'18' ,'36' ,'48' ,'24' ,'08' ,'12' ,'35' ,
'19' ,'27' ,'46' ,'40' ,'13' ,'26' ,'28' ,'21' ,'14' ,'34' ,'42' ,'44' ,
'29' ,'05' ,'17' ,'43' ,'39' ,'11' ,'31' ,'33' ,'38' ,'22' ,'06' ,'32' ,
'03' ,'52' ,'37' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('45' ,'01' ,'51' ,'47' ,'53' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 215.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
215.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 10196.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 10196.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'50' ,'30' ,'09' ,'41' ,'48' ,'51' ,'31' ,
'33' ,'53' ,'32' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('.' ,'49' ,'45' ,'20' ,'16' ,'07' ,'23' ,'25' ,
'01' ,'02' ,'15' ,'18' ,'36' ,'24' ,'08' ,'12' ,'35' ,'19' ,'27' ,
'46' ,'40' ,'13' ,'26' ,'28' ,'21' ,'14' ,'34' ,'42' ,'44' ,'29' ,
'05' ,'17' ,'43' ,'39' ,'11' ,'38' ,'47' ,'22' ,'06' ,'03' ,'37' )
THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_INCOME_GROUP2 = 0.29721362229102;
P_INCOME_GROUP6 = 0.01083591331269;
P_INCOME_GROUP5 = 0.05882352941176;
P_INCOME_GROUP4 = 0.07430340557275;
P_INCOME_GROUP3 = 0.10990712074303;
P_INCOME_GROUP1 = 0.41331269349845;
P_INCOME_GROUP7 = 0.03560371517027;
Q_INCOME_GROUP2 = 0.29721362229102;
Q_INCOME_GROUP6 = 0.01083591331269;
Q_INCOME_GROUP5 = 0.05882352941176;
Q_INCOME_GROUP4 = 0.07430340557275;
Q_INCOME_GROUP3 = 0.10990712074303;
Q_INCOME_GROUP1 = 0.41331269349845;
Q_INCOME_GROUP7 = 0.03560371517027;
I_INCOME_GROUP = '1';
U_INCOME_GROUP = 1;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('2' ,'3' ,'4' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('1' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'49' ,'50' ,'45' ,'20' ,'16' ,'30' ,'07' ,
'25' ,'09' ,'41' ,'18' ,'36' ,'48' ,'08' ,'19' ,'27' ,'46' ,'40' ,
'26' ,'28' ,'21' ,'51' ,'44' ,'29' ,'05' ,'17' ,'43' ,'39' ,'31' ,
'38' ,'47' ,'53' ,'06' ,'37' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('23' ,'01' ,'02' ,'15' ,'24' ,'12' ,'35' ,
'13' ,'14' ,'34' ,'42' ,'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 17643 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 17643 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(MONTHS_SINCE_ORIGIN ) AND
MONTHS_SINCE_ORIGIN < 71 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MONTHS_SINCE_ORIGIN ) AND
71 <= MONTHS_SINCE_ORIGIN THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MONTHS_SINCE_FIRST_GIFT ) THEN DO;
IF MONTHS_SINCE_FIRST_GIFT < 65 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 65 <= MONTHS_SINCE_FIRST_GIFT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_PROM ) THEN DO;
IF LIFETIME_PROM < 45.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 45.5 <= LIFETIME_PROM THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.28030303030303;
P_INCOME_GROUP6 = 0.04545454545454;
P_INCOME_GROUP5 = 0.21212121212121;
P_INCOME_GROUP4 = 0.18181818181818;
P_INCOME_GROUP3 = 0.07575757575757;
P_INCOME_GROUP1 = 0.16666666666666;
P_INCOME_GROUP7 = 0.03787878787878;
Q_INCOME_GROUP2 = 0.28030303030303;
Q_INCOME_GROUP6 = 0.04545454545454;
Q_INCOME_GROUP5 = 0.21212121212121;
Q_INCOME_GROUP4 = 0.18181818181818;
Q_INCOME_GROUP3 = 0.07575757575757;
Q_INCOME_GROUP1 = 0.16666666666666;
Q_INCOME_GROUP7 = 0.03787878787878;
I_INCOME_GROUP = '2';
U_INCOME_GROUP = 2;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.10344827586206;
P_INCOME_GROUP6 = 0.13793103448275;
P_INCOME_GROUP5 = 0.26206896551724;
P_INCOME_GROUP4 = 0.14482758620689;
P_INCOME_GROUP3 = 0.18620689655172;
P_INCOME_GROUP1 = 0.10344827586206;
P_INCOME_GROUP7 = 0.06206896551724;
Q_INCOME_GROUP2 = 0.10344827586206;
Q_INCOME_GROUP6 = 0.13793103448275;
Q_INCOME_GROUP5 = 0.26206896551724;
Q_INCOME_GROUP4 = 0.14482758620689;
Q_INCOME_GROUP3 = 0.18620689655172;
Q_INCOME_GROUP1 = 0.10344827586206;
Q_INCOME_GROUP7 = 0.06206896551724;
I_INCOME_GROUP = '5';
U_INCOME_GROUP = 5;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(DONOR_AGE ) AND
DONOR_AGE < 70.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(DONOR_AGE ) AND
70.5 <= DONOR_AGE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_PROM ) THEN DO;
IF LIFETIME_PROM < 70.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 70.5 <= LIFETIME_PROM THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(IN_HOUSE ) THEN DO;
_ARBFMT_12 = PUT( IN_HOUSE , BEST12.);
%DMNORMIP( _ARBFMT_12);
IF _ARBFMT_12 IN ('0' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_12 IN ('1' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(RECENT_RESPONSE_PROP ) AND
RECENT_RESPONSE_PROP < 0.049 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(RECENT_RESPONSE_PROP ) AND
0.049 <= RECENT_RESPONSE_PROP THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(RECENT_AVG_GIFT_AMT ) THEN DO;
IF RECENT_AVG_GIFT_AMT < 1.6 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 1.6 <= RECENT_AVG_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LAST_GIFT_AMT ) THEN DO;
IF LAST_GIFT_AMT < 1.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 1.5 <= LAST_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_INCOME_GROUP2 = 0.23076923076923;
P_INCOME_GROUP6 = 0;
P_INCOME_GROUP5 = 0;
P_INCOME_GROUP4 = 0;
P_INCOME_GROUP3 = 0.07692307692307;
P_INCOME_GROUP1 = 0.53846153846153;
P_INCOME_GROUP7 = 0.15384615384615;
Q_INCOME_GROUP2 = 0.23076923076923;
Q_INCOME_GROUP6 = 0;
Q_INCOME_GROUP5 = 0;
Q_INCOME_GROUP4 = 0;
Q_INCOME_GROUP3 = 0.07692307692307;
Q_INCOME_GROUP1 = 0.53846153846153;
Q_INCOME_GROUP7 = 0.15384615384615;
I_INCOME_GROUP = '1';
U_INCOME_GROUP = 1;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.35313531353135;
P_INCOME_GROUP6 = 0.03300330033003;
P_INCOME_GROUP5 = 0.1056105610561;
P_INCOME_GROUP4 = 0.07590759075907;
P_INCOME_GROUP3 = 0.08580858085808;
P_INCOME_GROUP1 = 0.34323432343234;
P_INCOME_GROUP7 = 0.003300330033;
Q_INCOME_GROUP2 = 0.35313531353135;
Q_INCOME_GROUP6 = 0.03300330033003;
Q_INCOME_GROUP5 = 0.1056105610561;
Q_INCOME_GROUP4 = 0.07590759075907;
Q_INCOME_GROUP3 = 0.08580858085808;
Q_INCOME_GROUP1 = 0.34323432343234;
Q_INCOME_GROUP7 = 0.003300330033;
I_INCOME_GROUP = '2';
U_INCOME_GROUP = 2;
END;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.29548229548229;
P_INCOME_GROUP6 = 0.04029304029304;
P_INCOME_GROUP5 = 0.12942612942612;
P_INCOME_GROUP4 = 0.14407814407814;
P_INCOME_GROUP3 = 0.16483516483516;
P_INCOME_GROUP1 = 0.19169719169719;
P_INCOME_GROUP7 = 0.03418803418803;
Q_INCOME_GROUP2 = 0.29548229548229;
Q_INCOME_GROUP6 = 0.04029304029304;
Q_INCOME_GROUP5 = 0.12942612942612;
Q_INCOME_GROUP4 = 0.14407814407814;
Q_INCOME_GROUP3 = 0.16483516483516;
Q_INCOME_GROUP1 = 0.19169719169719;
Q_INCOME_GROUP7 = 0.03418803418803;
I_INCOME_GROUP = '2';
U_INCOME_GROUP = 2;
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(DONOR_AGE ) AND
DONOR_AGE < 66.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(DONOR_AGE ) AND
66.5 <= DONOR_AGE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('.' ,'04' ,'49' ,'50' ,'45' ,'20' ,'16' ,'30' ,'07' ,
'25' ,'01' ,'09' ,'02' ,'41' ,'15' ,'18' ,'36' ,'24' ,'08' ,'12' ,
'35' ,'19' ,'27' ,'46' ,'40' ,'21' ,'14' ,'51' ,'34' ,'42' ,'44' ,
'05' ,'17' ,'43' ,'39' ,'11' ,'31' ,'38' ,'47' ,'53' ,'22' ,'06' ,
'32' ,'03' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('23' ,'48' ,'13' ,'26' ,'28' ,'29' ,'33' ,'37' )
THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_PROM ) THEN DO;
IF LIFETIME_PROM < 73.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 73.5 <= LIFETIME_PROM THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('2' ,'3' ,'4' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('1' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'49' ,'50' ,'45' ,'20' ,'16' ,'30' ,'07' ,
'25' ,'09' ,'41' ,'18' ,'36' ,'48' ,'08' ,'19' ,'27' ,'46' ,'40' ,
'26' ,'28' ,'21' ,'51' ,'44' ,'29' ,'05' ,'17' ,'43' ,'39' ,'31' ,
'33' ,'38' ,'47' ,'53' ,'06' ,'32' ,'52' ,'37' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('23' ,'01' ,'02' ,'15' ,'24' ,'12' ,'35' ,
'13' ,'34' ,'42' ,'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 17330.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 17330.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.15845070422535;
P_INCOME_GROUP6 = 0.08802816901408;
P_INCOME_GROUP5 = 0.21830985915492;
P_INCOME_GROUP4 = 0.21478873239436;
P_INCOME_GROUP3 = 0.09507042253521;
P_INCOME_GROUP1 = 0.10211267605633;
P_INCOME_GROUP7 = 0.12323943661971;
Q_INCOME_GROUP2 = 0.15845070422535;
Q_INCOME_GROUP6 = 0.08802816901408;
Q_INCOME_GROUP5 = 0.21830985915492;
Q_INCOME_GROUP4 = 0.21478873239436;
Q_INCOME_GROUP3 = 0.09507042253521;
Q_INCOME_GROUP1 = 0.10211267605633;
Q_INCOME_GROUP7 = 0.12323943661971;
I_INCOME_GROUP = '5';
U_INCOME_GROUP = 5;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 246.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
246.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('50' ,'45' ,'30' ,'25' ,'09' ,'41' ,'36' ,'48' ,
'51' ,'43' ,'31' ,'33' ,'47' ,'53' ,'32' ,'52' ,'37' ,'10' ) THEN
DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('.' ,'04' ,'49' ,'20' ,'16' ,'07' ,'18' ,
'08' ,'19' ,'27' ,'46' ,'40' ,'26' ,'28' ,'21' ,'44' ,'29' ,'05' ,
'17' ,'39' ,'38' ,'06' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 11131.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 11131.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
IF NOT MISSING(MOR_HIT_RATE ) AND
35 <= MOR_HIT_RATE THEN DO;
P_INCOME_GROUP2 = 0.22222222222222;
P_INCOME_GROUP6 = 0;
P_INCOME_GROUP5 = 0;
P_INCOME_GROUP4 = 0.33333333333333;
P_INCOME_GROUP3 = 0;
P_INCOME_GROUP1 = 0.11111111111111;
P_INCOME_GROUP7 = 0.33333333333333;
Q_INCOME_GROUP2 = 0.22222222222222;
Q_INCOME_GROUP6 = 0;
Q_INCOME_GROUP5 = 0;
Q_INCOME_GROUP4 = 0.33333333333333;
Q_INCOME_GROUP3 = 0;
Q_INCOME_GROUP1 = 0.11111111111111;
Q_INCOME_GROUP7 = 0.33333333333333;
I_INCOME_GROUP = '4';
U_INCOME_GROUP = 4;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.40227703984819;
P_INCOME_GROUP6 = 0.05313092979127;
P_INCOME_GROUP5 = 0.10436432637571;
P_INCOME_GROUP4 = 0.12903225806451;
P_INCOME_GROUP3 = 0.09487666034155;
P_INCOME_GROUP1 = 0.19734345351043;
P_INCOME_GROUP7 = 0.01897533206831;
Q_INCOME_GROUP2 = 0.40227703984819;
Q_INCOME_GROUP6 = 0.05313092979127;
Q_INCOME_GROUP5 = 0.10436432637571;
Q_INCOME_GROUP4 = 0.12903225806451;
Q_INCOME_GROUP3 = 0.09487666034155;
Q_INCOME_GROUP1 = 0.19734345351043;
Q_INCOME_GROUP7 = 0.01897533206831;
I_INCOME_GROUP = '2';
U_INCOME_GROUP = 2;
END;
END;
ELSE DO;
IF NOT MISSING(RECENT_STAR_STATUS ) AND
14.5 <= RECENT_STAR_STATUS THEN DO;
P_INCOME_GROUP2 = 0.2;
P_INCOME_GROUP6 = 0;
P_INCOME_GROUP5 = 0.2;
P_INCOME_GROUP4 = 0.2;
P_INCOME_GROUP3 = 0;
P_INCOME_GROUP1 = 0;
P_INCOME_GROUP7 = 0.4;
Q_INCOME_GROUP2 = 0.2;
Q_INCOME_GROUP6 = 0;
Q_INCOME_GROUP5 = 0.2;
Q_INCOME_GROUP4 = 0.2;
Q_INCOME_GROUP3 = 0;
Q_INCOME_GROUP1 = 0;
Q_INCOME_GROUP7 = 0.4;
I_INCOME_GROUP = '7';
U_INCOME_GROUP = 7;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.25784447476125;
P_INCOME_GROUP6 = 0.06412005457025;
P_INCOME_GROUP5 = 0.19099590723055;
P_INCOME_GROUP4 = 0.19645293315143;
P_INCOME_GROUP3 = 0.15552523874488;
P_INCOME_GROUP1 = 0.11869031377899;
P_INCOME_GROUP7 = 0.01637107776261;
Q_INCOME_GROUP2 = 0.25784447476125;
Q_INCOME_GROUP6 = 0.06412005457025;
Q_INCOME_GROUP5 = 0.19099590723055;
Q_INCOME_GROUP4 = 0.19645293315143;
Q_INCOME_GROUP3 = 0.15552523874488;
Q_INCOME_GROUP1 = 0.11869031377899;
Q_INCOME_GROUP7 = 0.01637107776261;
I_INCOME_GROUP = '2';
U_INCOME_GROUP = 2;
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('2' ,'3' ,'4' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('1' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'49' ,'50' ,'45' ,'20' ,'16' ,'30' ,'07' ,
'25' ,'09' ,'41' ,'18' ,'36' ,'48' ,'08' ,'19' ,'27' ,'46' ,'40' ,
'26' ,'28' ,'21' ,'51' ,'44' ,'29' ,'05' ,'17' ,'43' ,'39' ,'31' ,
'33' ,'38' ,'47' ,'53' ,'06' ,'32' ,'52' ,'37' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('23' ,'01' ,'02' ,'15' ,'24' ,'12' ,'35' ,
'13' ,'14' ,'34' ,'42' ,'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 17172.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 17172.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.04496788008565;
P_INCOME_GROUP6 = 0.15203426124197;
P_INCOME_GROUP5 = 0.38115631691648;
P_INCOME_GROUP4 = 0.15631691648822;
P_INCOME_GROUP3 = 0.05995717344753;
P_INCOME_GROUP1 = 0.02141327623126;
P_INCOME_GROUP7 = 0.18415417558886;
Q_INCOME_GROUP2 = 0.04496788008565;
Q_INCOME_GROUP6 = 0.15203426124197;
Q_INCOME_GROUP5 = 0.38115631691648;
Q_INCOME_GROUP4 = 0.15631691648822;
Q_INCOME_GROUP3 = 0.05995717344753;
Q_INCOME_GROUP1 = 0.02141327623126;
Q_INCOME_GROUP7 = 0.18415417558886;
I_INCOME_GROUP = '5';
U_INCOME_GROUP = 5;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(PER_CAPITA_INCOME ) AND
PER_CAPITA_INCOME < 10272 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PER_CAPITA_INCOME ) AND
10272 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) THEN DO;
IF MEDIAN_HOUSEHOLD_INCOME < 214.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 214.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('50' ,'45' ,'30' ,'41' ,'51' ,'43' ,'31' ,'47' ,
'53' ,'32' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('.' ,'04' ,'49' ,'20' ,'16' ,'07' ,'25' ,
'09' ,'18' ,'36' ,'48' ,'08' ,'19' ,'27' ,'46' ,'40' ,'26' ,'28' ,
'21' ,'44' ,'29' ,'05' ,'17' ,'39' ,'33' ,'38' ,'06' ,'37' ) THEN
DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(MOR_HIT_RATE ) AND
MOR_HIT_RATE < 16 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MOR_HIT_RATE ) AND
16 <= MOR_HIT_RATE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(FILE_AVG_GIFT ) THEN DO;
IF FILE_AVG_GIFT < 47.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 47.5 <= FILE_AVG_GIFT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_AVG_GIFT_AMT ) THEN DO;
IF LIFETIME_AVG_GIFT_AMT < 47.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 47.5 <= LIFETIME_AVG_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_INCOME_GROUP2 = 0.20689655172413;
P_INCOME_GROUP6 = 0;
P_INCOME_GROUP5 = 0.10344827586206;
P_INCOME_GROUP4 = 0.06896551724137;
P_INCOME_GROUP3 = 0.20689655172413;
P_INCOME_GROUP1 = 0.41379310344827;
P_INCOME_GROUP7 = 0;
Q_INCOME_GROUP2 = 0.20689655172413;
Q_INCOME_GROUP6 = 0;
Q_INCOME_GROUP5 = 0.10344827586206;
Q_INCOME_GROUP4 = 0.06896551724137;
Q_INCOME_GROUP3 = 0.20689655172413;
Q_INCOME_GROUP1 = 0.41379310344827;
Q_INCOME_GROUP7 = 0;
I_INCOME_GROUP = '1';
U_INCOME_GROUP = 1;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.1782334384858;
P_INCOME_GROUP6 = 0.0583596214511;
P_INCOME_GROUP5 = 0.20504731861198;
P_INCOME_GROUP4 = 0.2192429022082;
P_INCOME_GROUP3 = 0.17981072555205;
P_INCOME_GROUP1 = 0.09779179810725;
P_INCOME_GROUP7 = 0.06151419558359;
Q_INCOME_GROUP2 = 0.1782334384858;
Q_INCOME_GROUP6 = 0.0583596214511;
Q_INCOME_GROUP5 = 0.20504731861198;
Q_INCOME_GROUP4 = 0.2192429022082;
Q_INCOME_GROUP3 = 0.17981072555205;
Q_INCOME_GROUP1 = 0.09779179810725;
Q_INCOME_GROUP7 = 0.06151419558359;
I_INCOME_GROUP = '4';
U_INCOME_GROUP = 4;
END;
END;
ELSE DO;
P_INCOME_GROUP2 = 0.12755102040816;
P_INCOME_GROUP6 = 0.09566326530612;
P_INCOME_GROUP5 = 0.29400510204081;
P_INCOME_GROUP4 = 0.2563775510204;
P_INCOME_GROUP3 = 0.12181122448979;
P_INCOME_GROUP1 = 0.03188775510204;
P_INCOME_GROUP7 = 0.07270408163265;
Q_INCOME_GROUP2 = 0.12755102040816;
Q_INCOME_GROUP6 = 0.09566326530612;
Q_INCOME_GROUP5 = 0.29400510204081;
Q_INCOME_GROUP4 = 0.2563775510204;
Q_INCOME_GROUP3 = 0.12181122448979;
Q_INCOME_GROUP1 = 0.03188775510204;
Q_INCOME_GROUP7 = 0.07270408163265;
I_INCOME_GROUP = '5';
U_INCOME_GROUP = 5;
END;
END;
END;
END;
END;
****************************************************************;
****** END OF DECISION TREE SCORING CODE ******;
****************************************************************;
*;
* ASSIGN VALUE TO: INCOME_GROUP;
*;
length _format200 $200;
drop _format200;
_format200 = strip(I_INCOME_GROUP);
if _format200="7" then IMP_INCOME_GROUP = 7;
else
if _format200="6" then IMP_INCOME_GROUP = 6;
else
if _format200="5" then IMP_INCOME_GROUP = 5;
else
if _format200="4" then IMP_INCOME_GROUP = 4;
else
if _format200="3" then IMP_INCOME_GROUP = 3;
else
if _format200="2" then IMP_INCOME_GROUP = 2;
else
if _format200="1" then IMP_INCOME_GROUP = 1;
END;
*;
* IMPUTE VARIABLE: REP_SES;
*;
length IMP_REP_SES $4;
label IMP_REP_SES = 'Imputed: Replacement: SES';
IMP_REP_SES = REP_SES;
if IMP_REP_SES eq '' then do;
****************************************************************;
****** DECISION TREE SCORING CODE ******;
****************************************************************;
****** LENGTHS OF NEW CHARACTER VARIABLES ******;
LENGTH I_REP_SES $ 4;
LENGTH U_REP_SES $ 4;
LENGTH _WARN_ $ 4;
****** LABELS FOR NEW VARIABLES ******;
LABEL P_REP_SES2 = 'Predicted: REP_SES=2';
LABEL P_REP_SES3 = 'Predicted: REP_SES=3';
LABEL P_REP_SES1 = 'Predicted: REP_SES=1';
LABEL P_REP_SES4 = 'Predicted: REP_SES=4';
LABEL Q_REP_SES2 = 'Unadjusted P: REP_SES=2';
LABEL Q_REP_SES3 = 'Unadjusted P: REP_SES=3';
LABEL Q_REP_SES1 = 'Unadjusted P: REP_SES=1';
LABEL Q_REP_SES4 = 'Unadjusted P: REP_SES=4';
LABEL I_REP_SES = 'Into: REP_SES';
LABEL U_REP_SES = 'Unnormalized Into: REP_SES';
LABEL _WARN_ = 'Warnings';
****** TEMPORARY VARIABLES FOR FORMATTED VALUES ******;
LENGTH _ARBFMT_4 $ 4;
DROP _ARBFMT_4;
_ARBFMT_4 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_2 $ 2;
DROP _ARBFMT_2;
_ARBFMT_2 = ' ';
/* Initialize to avoid warning. */
****** ASSIGN OBSERVATION TO NODE ******;
DROP _BRANCH_;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'49' ,'43' ,'42' ,'46' ,'45' ,'20' ,'16' ,'07' ,
'34' ,'23' ,'25' ,'01' ,'02' ,'37' ,'15' ,'38' ,'18' ,'36' ,'48' ,'24' ,
'12' ,'35' ,'19' ,'27' ,'40' ,'13' ,'26' ,'28' ,'21' ,'14' ,'51' ,'44' ,
'29' ,'05' ,'17' ,'39' ,'11' ,'33' ,'47' ,'22' ,'06' ,'32' ,'03' ,'52' ,
'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('50' ,'53' ,'30' ,'09' ,'41' ,'08' ,'31' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(RECENT_RESPONSE_PROP ) THEN DO;
IF RECENT_RESPONSE_PROP < 0.866 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 0.866 <= RECENT_RESPONSE_PROP THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MONTHS_SINCE_FIRST_GIFT ) THEN DO;
IF MONTHS_SINCE_FIRST_GIFT < 159.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 159.5 <= MONTHS_SINCE_FIRST_GIFT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_REP_SES2 = 0;
P_REP_SES3 = 1;
P_REP_SES1 = 0;
P_REP_SES4 = 0;
Q_REP_SES2 = 0;
Q_REP_SES3 = 1;
Q_REP_SES1 = 0;
Q_REP_SES4 = 0;
I_REP_SES = '3';
U_REP_SES = '3';
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'49' ,'43' ,'46' ,'45' ,'20' ,'16' ,'07' ,'25' ,
'37' ,'38' ,'18' ,'36' ,'48' ,'19' ,'27' ,'40' ,'26' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('42' ,'34' ,'23' ,'01' ,'02' ,'15' ,'24' ,'12' ,
'35' ,'13' ,'28' ,'21' ,'14' ,'51' ,'44' ,'29' ,'05' ,'17' ,'39' ,'11' ,
'33' ,'47' ,'22' ,'06' ,'32' ,'03' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 15470.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 15470.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 719.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 719.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_SES2 = 1;
P_REP_SES3 = 0;
P_REP_SES1 = 0;
P_REP_SES4 = 0;
Q_REP_SES2 = 1;
Q_REP_SES3 = 0;
Q_REP_SES1 = 0;
Q_REP_SES4 = 0;
I_REP_SES = '2';
U_REP_SES = '2';
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('42' ,'34' ,'23' ,'01' ,'02' ,'15' ,'24' ,'12' ,'35' ,
'13' ,'14' ,'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('28' ,'21' ,'51' ,'44' ,'29' ,'05' ,'17' ,'39' ,
'33' ,'47' ,'06' ,'32' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF 15304.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PER_CAPITA_INCOME < 15304.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF 720.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 1;
END;
ELSE IF MEDIAN_HOME_VALUE < 720.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('28' ,'44' ,'29' ,'05' ,'17' ,'39' ,'47' ,'06' )
THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('21' ,'51' ,'33' ,'32' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF 10141.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PER_CAPITA_INCOME < 10141.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) THEN DO;
IF 238.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 1;
END;
ELSE IF MEDIAN_HOUSEHOLD_INCOME < 238.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
_ARBFMT_4 = PUT( REP_URBANICITY , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('R' ,'S' ,'C' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('U' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('21' ,'51' ,'33' ,'32' ,'52' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('10' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_OWNER_OCCUPIED ) THEN DO;
IF 39.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PCT_OWNER_OCCUPIED < 39.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_REP_SES2 = 0;
P_REP_SES3 = 0;
P_REP_SES1 = 0;
P_REP_SES4 = 1;
Q_REP_SES2 = 0;
Q_REP_SES3 = 0;
Q_REP_SES1 = 0;
Q_REP_SES4 = 1;
I_REP_SES = '4';
U_REP_SES = '4';
END;
ELSE DO;
P_REP_SES2 = 0;
P_REP_SES3 = 1;
P_REP_SES1 = 0;
P_REP_SES4 = 0;
Q_REP_SES2 = 0;
Q_REP_SES3 = 1;
Q_REP_SES1 = 0;
Q_REP_SES4 = 0;
I_REP_SES = '3';
U_REP_SES = '3';
END;
END;
ELSE DO;
P_REP_SES2 = 1;
P_REP_SES3 = 0;
P_REP_SES1 = 0;
P_REP_SES4 = 0;
Q_REP_SES2 = 1;
Q_REP_SES3 = 0;
Q_REP_SES1 = 0;
Q_REP_SES4 = 0;
I_REP_SES = '2';
U_REP_SES = '2';
END;
END;
ELSE DO;
P_REP_SES2 = 0;
P_REP_SES3 = 0;
P_REP_SES1 = 1;
P_REP_SES4 = 0;
Q_REP_SES2 = 0;
Q_REP_SES3 = 0;
Q_REP_SES1 = 1;
Q_REP_SES4 = 0;
I_REP_SES = '1';
U_REP_SES = '1';
END;
END;
END;
****************************************************************;
****** END OF DECISION TREE SCORING CODE ******;
****************************************************************;
*;
* ASSIGN VALUE TO: REP_SES;
*;
length _format200 $200;
drop _format200;
_format200 = strip(I_REP_SES);
if _format200="4" then IMP_REP_SES = "4   ";
else
if _format200="3" then IMP_REP_SES = "3   ";
else
if _format200="2" then IMP_REP_SES = "2   ";
else
if _format200="1" then IMP_REP_SES = "1   ";
END;
*;
* IMPUTE VARIABLE: REP_URBANICITY;
*;
length IMP_REP_URBANICITY $4;
label IMP_REP_URBANICITY = 'Imputed: Replacement: URBANICITY';
IMP_REP_URBANICITY = REP_URBANICITY;
if IMP_REP_URBANICITY eq '' then do;
****************************************************************;
****** DECISION TREE SCORING CODE ******;
****************************************************************;
****** LENGTHS OF NEW CHARACTER VARIABLES ******;
LENGTH I_REP_URBANICITY $ 4;
LENGTH U_REP_URBANICITY $ 4;
LENGTH _WARN_ $ 4;
****** LABELS FOR NEW VARIABLES ******;
LABEL P_REP_URBANICITYU = 'Predicted: REP_URBANICITY=U';
LABEL P_REP_URBANICITYR = 'Predicted: REP_URBANICITY=R';
LABEL P_REP_URBANICITYS = 'Predicted: REP_URBANICITY=S';
LABEL P_REP_URBANICITYC = 'Predicted: REP_URBANICITY=C';
LABEL P_REP_URBANICITYT = 'Predicted: REP_URBANICITY=T';
LABEL Q_REP_URBANICITYU = 'Unadjusted P: REP_URBANICITY=U';
LABEL Q_REP_URBANICITYR = 'Unadjusted P: REP_URBANICITY=R';
LABEL Q_REP_URBANICITYS = 'Unadjusted P: REP_URBANICITY=S';
LABEL Q_REP_URBANICITYC = 'Unadjusted P: REP_URBANICITY=C';
LABEL Q_REP_URBANICITYT = 'Unadjusted P: REP_URBANICITY=T';
LABEL I_REP_URBANICITY = 'Into: REP_URBANICITY';
LABEL U_REP_URBANICITY = 'Unnormalized Into: REP_URBANICITY';
LABEL _WARN_ = 'Warnings';
****** TEMPORARY VARIABLES FOR FORMATTED VALUES ******;
LENGTH _ARBFMT_4 $ 4;
DROP _ARBFMT_4;
_ARBFMT_4 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_2 $ 2;
DROP _ARBFMT_2;
_ARBFMT_2 = ' ';
/* Initialize to avoid warning. */
****** ASSIGN OBSERVATION TO NODE ******;
DROP _BRANCH_;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'20' ,'16' ,'07' ,'34' ,'01' ,'09' ,'02' ,'41' ,
'37' ,'15' ,'38' ,'18' ,'36' ,'08' ,'12' ,'35' ,'19' ,'27' ,'40' ,'13' ,
'26' ,'28' ,'21' ,'14' ,'51' ,'44' ,'29' ,'05' ,'17' ,'39' ,'11' ,'33' ,
'47' ,'22' ,'06' ,'32' ,'03' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('49' ,'50' ,'43' ,'53' ,'42' ,'46' ,'45' ,'30' ,'23' ,
'25' ,'48' ,'24' ,'31' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LAST_GIFT_AMT ) THEN DO;
IF LAST_GIFT_AMT < 215 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 215 <= LAST_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_MAX_GIFT_AMT ) THEN DO;
IF LIFETIME_MAX_GIFT_AMT < 215 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 215 <= LIFETIME_MAX_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('30' ,'23' ,'25' ,'24' ,'31' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('49' ,'50' ,'43' ,'53' ,'42' ,'46' ,'45' ,'48' )
THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(REP_SES ) THEN DO;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('3' ,'1' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('2' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF 15609 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PER_CAPITA_INCOME < 15609 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 1;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 1;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'C';
U_REP_URBANICITY = 'C';
END;
ELSE DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 1;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 1;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'R';
U_REP_URBANICITY = 'R';
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'07' ,'01' ,'09' ,'02' ,'08' ,'27' ,'26' ,'28' ,
'51' ,'44' ,'29' ,'05' ,'17' ,'39' ,'11' ,'33' ,'47' ,'22' ,'06' ,'32' ,
'03' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('20' ,'16' ,'34' ,'41' ,'37' ,'15' ,'38' ,'18' ,
'36' ,'12' ,'35' ,'19' ,'40' ,'13' ,'21' ,'14' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_OWNER_OCCUPIED ) THEN DO;
IF PCT_OWNER_OCCUPIED < 65.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 65.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) THEN DO;
IF MEDIAN_HOUSEHOLD_INCOME < 354.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 354.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'07' ,'01' ,'09' ,'02' ,'08' ,'05' ,'39' ,'06' ,
'03' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('27' ,'26' ,'28' ,'51' ,'44' ,'29' ,'17' ,'11' ,
'33' ,'47' ,'22' ,'32' ,'52' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF 1440 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 1;
END;
ELSE IF MEDIAN_HOME_VALUE < 1440 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(REP_SES ) THEN DO;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('1' ,'4' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('2' ,'3' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('39' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('04' ,'07' ,'01' ,'09' ,'02' ,'08' ,'05' ,'06' ,
'03' ,'10' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_ATTRIBUTE1 ) THEN DO;
IF 6.5 <= PCT_ATTRIBUTE1 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PCT_ATTRIBUTE1 < 6.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 1;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 1;
I_REP_URBANICITY = 'T';
U_REP_URBANICITY = 'T';
END;
ELSE DO;
P_REP_URBANICITYU = 1;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 1;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'U';
U_REP_URBANICITY = 'U';
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('27' ,'26' ,'28' ,'51' ,'44' ,'29' ,'33' ,'47' ,
'22' ,'32' ,'52' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('17' ,'11' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(REP_SES ) THEN DO;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('2' ,'3' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('1' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 1970.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 1970.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 1;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 1;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'S';
U_REP_URBANICITY = 'S';
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('51' ,'44' ,'47' ,'52' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('27' ,'26' ,'28' ,'29' ,'33' ,'22' ,'32' )
THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 11036.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 11036.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 455 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 455 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 1;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 1;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'R';
U_REP_URBANICITY = 'R';
END;
ELSE DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 1;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 1;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'C';
U_REP_URBANICITY = 'C';
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('34' ,'41' ,'37' ,'38' ,'36' ,'35' ,'40' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('20' ,'16' ,'15' ,'18' ,'12' ,'19' ,'13' ,'21' ,
'14' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) THEN DO;
IF MEDIAN_HOUSEHOLD_INCOME < 302.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 302.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 797.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 797.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 1;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 1;
I_REP_URBANICITY = 'T';
U_REP_URBANICITY = 'T';
END;
ELSE DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 1;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 1;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'S';
U_REP_URBANICITY = 'S';
END;
END;
END;
****************************************************************;
****** END OF DECISION TREE SCORING CODE ******;
****************************************************************;
*;
* ASSIGN VALUE TO: REP_URBANICITY;
*;
length _format200 $200;
drop _format200;
_format200 = strip(I_REP_URBANICITY);
if _format200="U" then IMP_REP_URBANICITY = "U   ";
else
if _format200="T" then IMP_REP_URBANICITY = "T   ";
else
if _format200="S" then IMP_REP_URBANICITY = "S   ";
else
if _format200="R" then IMP_REP_URBANICITY = "R   ";
else
if _format200="C" then IMP_REP_URBANICITY = "C   ";
END;
*;
* IMPUTE VARIABLE: WEALTH_RATING;
*;
label IMP_WEALTH_RATING = 'Imputed WEALTH_RATING';
IMP_WEALTH_RATING = WEALTH_RATING;
if missing(IMP_WEALTH_RATING) then do;
****************************************************************;
****** DECISION TREE SCORING CODE ******;
****************************************************************;
****** LENGTHS OF NEW CHARACTER VARIABLES ******;
LENGTH I_WEALTH_RATING $ 12;
LENGTH _WARN_ $ 4;
****** LABELS FOR NEW VARIABLES ******;
LABEL P_WEALTH_RATING4 = 'Predicted: WEALTH_RATING=4';
LABEL P_WEALTH_RATING5 = 'Predicted: WEALTH_RATING=5';
LABEL P_WEALTH_RATING7 = 'Predicted: WEALTH_RATING=7';
LABEL P_WEALTH_RATING2 = 'Predicted: WEALTH_RATING=2';
LABEL P_WEALTH_RATING1 = 'Predicted: WEALTH_RATING=1';
LABEL P_WEALTH_RATING3 = 'Predicted: WEALTH_RATING=3';
LABEL P_WEALTH_RATING6 = 'Predicted: WEALTH_RATING=6';
LABEL P_WEALTH_RATING9 = 'Predicted: WEALTH_RATING=9';
LABEL P_WEALTH_RATING8 = 'Predicted: WEALTH_RATING=8';
LABEL P_WEALTH_RATING0 = 'Predicted: WEALTH_RATING=0';
LABEL Q_WEALTH_RATING4 = 'Unadjusted P: WEALTH_RATING=4';
LABEL Q_WEALTH_RATING5 = 'Unadjusted P: WEALTH_RATING=5';
LABEL Q_WEALTH_RATING7 = 'Unadjusted P: WEALTH_RATING=7';
LABEL Q_WEALTH_RATING2 = 'Unadjusted P: WEALTH_RATING=2';
LABEL Q_WEALTH_RATING1 = 'Unadjusted P: WEALTH_RATING=1';
LABEL Q_WEALTH_RATING3 = 'Unadjusted P: WEALTH_RATING=3';
LABEL Q_WEALTH_RATING6 = 'Unadjusted P: WEALTH_RATING=6';
LABEL Q_WEALTH_RATING9 = 'Unadjusted P: WEALTH_RATING=9';
LABEL Q_WEALTH_RATING8 = 'Unadjusted P: WEALTH_RATING=8';
LABEL Q_WEALTH_RATING0 = 'Unadjusted P: WEALTH_RATING=0';
LABEL I_WEALTH_RATING = 'Into: WEALTH_RATING';
LABEL U_WEALTH_RATING = 'Unnormalized Into: WEALTH_RATING';
LABEL _WARN_ = 'Warnings';
****** TEMPORARY VARIABLES FOR FORMATTED VALUES ******;
LENGTH _ARBFMT_12 $ 12;
DROP _ARBFMT_12;
_ARBFMT_12 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_2 $ 2;
DROP _ARBFMT_2;
_ARBFMT_2 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_4 $ 4;
DROP _ARBFMT_4;
_ARBFMT_4 = ' ';
/* Initialize to avoid warning. */
****** ASSIGN OBSERVATION TO NODE ******;
DROP _BRANCH_;
_BRANCH_ = -1;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('2' ,'3' ,'4' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('1' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'49' ,'50' ,'43' ,'45' ,'20' ,'16' ,'30' ,'07' ,
'41' ,'37' ,'18' ,'36' ,'48' ,'08' ,'31' ,'19' ,'27' ,'46' ,'26' ,'28' ,
'21' ,'51' ,'44' ,'05' ,'17' ,'39' ,'25' ,'33' ,'38' ,'09' ,'29' ,'53' ,
'40' ,'32' ,'47' ,'10' ,'52' ,'06' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('34' ,'23' ,'01' ,'02' ,'15' ,'35' ,'13' ,'42' ,
'14' ,'24' ,'12' ,'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 17151 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 17151 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 583.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
583.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 32356.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 32356.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('.' ,'34' ,'23' ,'01' ,'02' ,'15' ,'35' ,'42' ,'24' ,
'12' ,'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('13' ,'14' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_ARBFMT_12 = PUT( INCOME_GROUP , BEST12.);
%DMNORMIP( _ARBFMT_12);
IF _ARBFMT_12 IN ('1' ) THEN DO;
P_WEALTH_RATING4 = 0.2;
P_WEALTH_RATING5 = 0.2;
P_WEALTH_RATING7 = 0;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0.4;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0.2;
Q_WEALTH_RATING4 = 0.2;
Q_WEALTH_RATING5 = 0.2;
Q_WEALTH_RATING7 = 0;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0.4;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0.2;
I_WEALTH_RATING = '9';
U_WEALTH_RATING = 9;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(PER_CAPITA_INCOME ) AND
PER_CAPITA_INCOME < 22479.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PER_CAPITA_INCOME ) AND
22479.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 1038 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 1038 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) THEN DO;
IF MEDIAN_HOUSEHOLD_INCOME < 594.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 594.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
MEDIAN_HOME_VALUE < 1753 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
1753 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_OWNER_OCCUPIED ) THEN DO;
IF 89.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PCT_OWNER_OCCUPIED < 89.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) THEN DO;
IF MEDIAN_HOUSEHOLD_INCOME < 612.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 612.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0.03333333333333;
P_WEALTH_RATING5 = 0;
P_WEALTH_RATING7 = 0.06666666666666;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0.1;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0.16666666666666;
P_WEALTH_RATING8 = 0.63333333333333;
P_WEALTH_RATING0 = 0;
Q_WEALTH_RATING4 = 0.03333333333333;
Q_WEALTH_RATING5 = 0;
Q_WEALTH_RATING7 = 0.06666666666666;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0.1;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0.16666666666666;
Q_WEALTH_RATING8 = 0.63333333333333;
Q_WEALTH_RATING0 = 0;
I_WEALTH_RATING = '8';
U_WEALTH_RATING = 8;
END;
ELSE DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0.02631578947368;
P_WEALTH_RATING7 = 0;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0;
P_WEALTH_RATING6 = 0.05263157894736;
P_WEALTH_RATING9 = 0.78947368421052;
P_WEALTH_RATING8 = 0.13157894736842;
P_WEALTH_RATING0 = 0;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0.02631578947368;
Q_WEALTH_RATING7 = 0;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0;
Q_WEALTH_RATING6 = 0.05263157894736;
Q_WEALTH_RATING9 = 0.78947368421052;
Q_WEALTH_RATING8 = 0.13157894736842;
Q_WEALTH_RATING0 = 0;
I_WEALTH_RATING = '9';
U_WEALTH_RATING = 9;
END;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.01212121212121;
P_WEALTH_RATING5 = 0.0030303030303;
P_WEALTH_RATING7 = 0.01212121212121;
P_WEALTH_RATING2 = 0.0030303030303;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0;
P_WEALTH_RATING6 = 0.01818181818181;
P_WEALTH_RATING9 = 0.84848484848484;
P_WEALTH_RATING8 = 0.09696969696969;
P_WEALTH_RATING0 = 0.0060606060606;
Q_WEALTH_RATING4 = 0.01212121212121;
Q_WEALTH_RATING5 = 0.0030303030303;
Q_WEALTH_RATING7 = 0.01212121212121;
Q_WEALTH_RATING2 = 0.0030303030303;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0;
Q_WEALTH_RATING6 = 0.01818181818181;
Q_WEALTH_RATING9 = 0.84848484848484;
Q_WEALTH_RATING8 = 0.09696969696969;
Q_WEALTH_RATING0 = 0.0060606060606;
I_WEALTH_RATING = '9';
U_WEALTH_RATING = 9;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 383.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
383.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_OWNER_OCCUPIED ) THEN DO;
IF PCT_OWNER_OCCUPIED < 61.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 61.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 15622.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 15622.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
_ARBFMT_4 = PUT( REP_URBANICITY , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('U' ,'R' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('S' ,'C' ,'T' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('01' ,'02' ,'42' ,'03' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('34' ,'23' ,'15' ,'35' ,'13' ,'14' ,'24' ,
'12' ,'11' ,'22' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF 1733 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 1;
END;
ELSE IF MEDIAN_HOME_VALUE < 1733 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0.05070422535211;
P_WEALTH_RATING5 = 0.08169014084507;
P_WEALTH_RATING7 = 0.19718309859154;
P_WEALTH_RATING2 = 0.04507042253521;
P_WEALTH_RATING1 = 0.0112676056338;
P_WEALTH_RATING3 = 0.0281690140845;
P_WEALTH_RATING6 = 0.14647887323943;
P_WEALTH_RATING9 = 0.19436619718309;
P_WEALTH_RATING8 = 0.2338028169014;
P_WEALTH_RATING0 = 0.0112676056338;
Q_WEALTH_RATING4 = 0.05070422535211;
Q_WEALTH_RATING5 = 0.08169014084507;
Q_WEALTH_RATING7 = 0.19718309859154;
Q_WEALTH_RATING2 = 0.04507042253521;
Q_WEALTH_RATING1 = 0.0112676056338;
Q_WEALTH_RATING3 = 0.0281690140845;
Q_WEALTH_RATING6 = 0.14647887323943;
Q_WEALTH_RATING9 = 0.19436619718309;
Q_WEALTH_RATING8 = 0.2338028169014;
Q_WEALTH_RATING0 = 0.0112676056338;
I_WEALTH_RATING = '8';
U_WEALTH_RATING = 8;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.17222222222222;
P_WEALTH_RATING5 = 0.09444444444444;
P_WEALTH_RATING7 = 0.12222222222222;
P_WEALTH_RATING2 = 0.03333333333333;
P_WEALTH_RATING1 = 0.02222222222222;
P_WEALTH_RATING3 = 0.11666666666666;
P_WEALTH_RATING6 = 0.18333333333333;
P_WEALTH_RATING9 = 0.10555555555555;
P_WEALTH_RATING8 = 0.11666666666666;
P_WEALTH_RATING0 = 0.03333333333333;
Q_WEALTH_RATING4 = 0.17222222222222;
Q_WEALTH_RATING5 = 0.09444444444444;
Q_WEALTH_RATING7 = 0.12222222222222;
Q_WEALTH_RATING2 = 0.03333333333333;
Q_WEALTH_RATING1 = 0.02222222222222;
Q_WEALTH_RATING3 = 0.11666666666666;
Q_WEALTH_RATING6 = 0.18333333333333;
Q_WEALTH_RATING9 = 0.10555555555555;
Q_WEALTH_RATING8 = 0.11666666666666;
Q_WEALTH_RATING0 = 0.03333333333333;
I_WEALTH_RATING = '6';
U_WEALTH_RATING = 6;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
MEDIAN_HOME_VALUE < 1628 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
1628 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 25807.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 25807.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('.' ,'34' ,'35' ,'13' ,'42' ,'14' ,'24' ,'12' ,
'11' ,'22' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('23' ,'01' ,'02' ,'15' ,'03' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(LIFETIME_CARD_PROM ) AND
LIFETIME_CARD_PROM < 34.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(LIFETIME_CARD_PROM ) AND
34.5 <= LIFETIME_CARD_PROM THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(FILE_CARD_GIFT ) THEN DO;
IF FILE_CARD_GIFT < 21.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 21.5 <= FILE_CARD_GIFT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_PROM ) THEN DO;
IF LIFETIME_PROM < 101.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 101.5 <= LIFETIME_PROM THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0.25;
P_WEALTH_RATING7 = 0.25;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0.25;
P_WEALTH_RATING3 = 0;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0.125;
P_WEALTH_RATING8 = 0.125;
P_WEALTH_RATING0 = 0;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0.25;
Q_WEALTH_RATING7 = 0.25;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0.25;
Q_WEALTH_RATING3 = 0;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0.125;
Q_WEALTH_RATING8 = 0.125;
Q_WEALTH_RATING0 = 0;
I_WEALTH_RATING = '5';
U_WEALTH_RATING = 5;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(PER_CAPITA_INCOME ) AND
PER_CAPITA_INCOME < 28361.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PER_CAPITA_INCOME ) AND
28361.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 3997 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 3997 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('.' ,'34' ,'02' ,'35' ,'13' ,'14' ,'24' ,'12' ,
'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('23' ,'01' ,'15' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0.03296703296703;
P_WEALTH_RATING5 = 0.01098901098901;
P_WEALTH_RATING7 = 0.09890109890109;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0.01098901098901;
P_WEALTH_RATING6 = 0.09890109890109;
P_WEALTH_RATING9 = 0.53846153846153;
P_WEALTH_RATING8 = 0.19780219780219;
P_WEALTH_RATING0 = 0.01098901098901;
Q_WEALTH_RATING4 = 0.03296703296703;
Q_WEALTH_RATING5 = 0.01098901098901;
Q_WEALTH_RATING7 = 0.09890109890109;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0.01098901098901;
Q_WEALTH_RATING6 = 0.09890109890109;
Q_WEALTH_RATING9 = 0.53846153846153;
Q_WEALTH_RATING8 = 0.19780219780219;
Q_WEALTH_RATING0 = 0.01098901098901;
I_WEALTH_RATING = '9';
U_WEALTH_RATING = 9;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.02597402597402;
P_WEALTH_RATING5 = 0.06493506493506;
P_WEALTH_RATING7 = 0.29437229437229;
P_WEALTH_RATING2 = 0.02164502164502;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0.01298701298701;
P_WEALTH_RATING6 = 0.17748917748917;
P_WEALTH_RATING9 = 0.09090909090909;
P_WEALTH_RATING8 = 0.29437229437229;
P_WEALTH_RATING0 = 0.01731601731601;
Q_WEALTH_RATING4 = 0.02597402597402;
Q_WEALTH_RATING5 = 0.06493506493506;
Q_WEALTH_RATING7 = 0.29437229437229;
Q_WEALTH_RATING2 = 0.02164502164502;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0.01298701298701;
Q_WEALTH_RATING6 = 0.17748917748917;
Q_WEALTH_RATING9 = 0.09090909090909;
Q_WEALTH_RATING8 = 0.29437229437229;
Q_WEALTH_RATING0 = 0.01731601731601;
I_WEALTH_RATING = '7';
U_WEALTH_RATING = 7;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 504.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
504.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_OWNER_OCCUPIED ) THEN DO;
IF PCT_OWNER_OCCUPIED < 94.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 94.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('.' ,'34' ,'23' ,'02' ,'15' ,'35' ,'13' ,'42' ,
'24' ,'12' ,'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('14' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0.00636942675159;
P_WEALTH_RATING5 = 0.01273885350318;
P_WEALTH_RATING7 = 0.08917197452229;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0.01910828025477;
P_WEALTH_RATING3 = 0.02547770700636;
P_WEALTH_RATING6 = 0.01273885350318;
P_WEALTH_RATING9 = 0.61783439490445;
P_WEALTH_RATING8 = 0.20382165605095;
P_WEALTH_RATING0 = 0.01273885350318;
Q_WEALTH_RATING4 = 0.00636942675159;
Q_WEALTH_RATING5 = 0.01273885350318;
Q_WEALTH_RATING7 = 0.08917197452229;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0.01910828025477;
Q_WEALTH_RATING3 = 0.02547770700636;
Q_WEALTH_RATING6 = 0.01273885350318;
Q_WEALTH_RATING9 = 0.61783439490445;
Q_WEALTH_RATING8 = 0.20382165605095;
Q_WEALTH_RATING0 = 0.01273885350318;
I_WEALTH_RATING = '9';
U_WEALTH_RATING = 9;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(PER_CAPITA_INCOME ) AND
PER_CAPITA_INCOME < 22879 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PER_CAPITA_INCOME ) AND
22879 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('.' ,'34' ,'02' ,'15' ,'35' ,'13' ,'42' ,'14' ,
'24' ,'12' ,'11' ,'22' ,'03' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('23' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 1587 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 1587 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0.02777777777777;
P_WEALTH_RATING5 = 0.01388888888888;
P_WEALTH_RATING7 = 0.08333333333333;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0;
P_WEALTH_RATING6 = 0.05555555555555;
P_WEALTH_RATING9 = 0.56944444444444;
P_WEALTH_RATING8 = 0.25;
P_WEALTH_RATING0 = 0;
Q_WEALTH_RATING4 = 0.02777777777777;
Q_WEALTH_RATING5 = 0.01388888888888;
Q_WEALTH_RATING7 = 0.08333333333333;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0;
Q_WEALTH_RATING6 = 0.05555555555555;
Q_WEALTH_RATING9 = 0.56944444444444;
Q_WEALTH_RATING8 = 0.25;
Q_WEALTH_RATING0 = 0;
I_WEALTH_RATING = '9';
U_WEALTH_RATING = 9;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.01699716713881;
P_WEALTH_RATING5 = 0.03116147308781;
P_WEALTH_RATING7 = 0.18413597733711;
P_WEALTH_RATING2 = 0.0084985835694;
P_WEALTH_RATING1 = 0.0113314447592;
P_WEALTH_RATING3 = 0.01699716713881;
P_WEALTH_RATING6 = 0.08215297450424;
P_WEALTH_RATING9 = 0.22379603399433;
P_WEALTH_RATING8 = 0.42492917847025;
P_WEALTH_RATING0 = 0;
Q_WEALTH_RATING4 = 0.01699716713881;
Q_WEALTH_RATING5 = 0.03116147308781;
Q_WEALTH_RATING7 = 0.18413597733711;
Q_WEALTH_RATING2 = 0.0084985835694;
Q_WEALTH_RATING1 = 0.0113314447592;
Q_WEALTH_RATING3 = 0.01699716713881;
Q_WEALTH_RATING6 = 0.08215297450424;
Q_WEALTH_RATING9 = 0.22379603399433;
Q_WEALTH_RATING8 = 0.42492917847025;
Q_WEALTH_RATING0 = 0;
I_WEALTH_RATING = '8';
U_WEALTH_RATING = 8;
END;
END;
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 268.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
268.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 11745.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 11745.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'50' ,'43' ,'45' ,'.' ,'30' ,'41' ,'37' ,'36' ,
'48' ,'31' ,'46' ,'26' ,'51' ,'25' ,'33' ,'38' ,'09' ,'53' ,'32' ,'47' ,
'10' ,'52' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('49' ,'20' ,'16' ,'07' ,'18' ,'08' ,'19' ,'27' ,
'28' ,'21' ,'44' ,'05' ,'17' ,'39' ,'29' ,'40' ,'06' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 330.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
330.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 13147.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 13147.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'49' ,'43' ,'45' ,'30' ,'07' ,'41' ,'37' ,
'36' ,'08' ,'31' ,'46' ,'26' ,'21' ,'51' ,'17' ,'39' ,'25' ,'38' ,
'09' ,'29' ,'47' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('20' ,'.' ,'16' ,'18' ,'48' ,'19' ,'27' ,'28' ,
'44' ,'05' ,'33' ,'40' ,'06' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(RECENT_AVG_GIFT_AMT ) AND
RECENT_AVG_GIFT_AMT < 48.335 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(RECENT_AVG_GIFT_AMT ) AND
48.335 <= RECENT_AVG_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_MIN_GIFT_AMT ) THEN DO;
IF LIFETIME_MIN_GIFT_AMT < 37.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 37.5 <= LIFETIME_MIN_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(RECENT_AVG_CARD_GIFT_AMT ) THEN DO;
IF RECENT_AVG_CARD_GIFT_AMT < 45.625 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 45.625 <= RECENT_AVG_CARD_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0;
P_WEALTH_RATING7 = 0;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0.33333333333333;
P_WEALTH_RATING6 = 0.33333333333333;
P_WEALTH_RATING9 = 0.33333333333333;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0;
Q_WEALTH_RATING7 = 0;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0.33333333333333;
Q_WEALTH_RATING6 = 0.33333333333333;
Q_WEALTH_RATING9 = 0.33333333333333;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0;
I_WEALTH_RATING = '3';
U_WEALTH_RATING = 3;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
MEDIAN_HOME_VALUE < 970.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOME_VALUE ) AND
970.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_OWNER_OCCUPIED ) THEN DO;
IF 27.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PCT_OWNER_OCCUPIED < 27.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 18997.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 18997.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(RECENT_AVG_GIFT_AMT ) AND
RECENT_AVG_GIFT_AMT < 4.25 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(RECENT_AVG_GIFT_AMT ) AND
4.25 <= RECENT_AVG_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(RECENT_RESPONSE_PROP ) THEN DO;
IF RECENT_RESPONSE_PROP < 0.024 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 0.024 <= RECENT_RESPONSE_PROP THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(FILE_AVG_GIFT ) THEN DO;
IF FILE_AVG_GIFT < 3.605 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 3.605 <= FILE_AVG_GIFT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0.4;
P_WEALTH_RATING7 = 0;
P_WEALTH_RATING2 = 0.2;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0.4;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0.4;
Q_WEALTH_RATING7 = 0;
Q_WEALTH_RATING2 = 0.2;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0.4;
I_WEALTH_RATING = '5';
U_WEALTH_RATING = 5;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.19565217391304;
P_WEALTH_RATING5 = 0.09420289855072;
P_WEALTH_RATING7 = 0.04347826086956;
P_WEALTH_RATING2 = 0.15942028985507;
P_WEALTH_RATING1 = 0.05072463768115;
P_WEALTH_RATING3 = 0.31884057971014;
P_WEALTH_RATING6 = 0.09420289855072;
P_WEALTH_RATING9 = 0;
P_WEALTH_RATING8 = 0.03623188405797;
P_WEALTH_RATING0 = 0.00724637681159;
Q_WEALTH_RATING4 = 0.19565217391304;
Q_WEALTH_RATING5 = 0.09420289855072;
Q_WEALTH_RATING7 = 0.04347826086956;
Q_WEALTH_RATING2 = 0.15942028985507;
Q_WEALTH_RATING1 = 0.05072463768115;
Q_WEALTH_RATING3 = 0.31884057971014;
Q_WEALTH_RATING6 = 0.09420289855072;
Q_WEALTH_RATING9 = 0;
Q_WEALTH_RATING8 = 0.03623188405797;
Q_WEALTH_RATING0 = 0.00724637681159;
I_WEALTH_RATING = '3';
U_WEALTH_RATING = 3;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(LIFETIME_PROM ) AND
LIFETIME_PROM < 100.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(LIFETIME_PROM ) AND
100.5 <= LIFETIME_PROM THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_CARD_PROM ) THEN DO;
IF LIFETIME_CARD_PROM < 37.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 37.5 <= LIFETIME_CARD_PROM THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_GIFT_COUNT ) THEN DO;
IF LIFETIME_GIFT_COUNT < 71.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 71.5 <= LIFETIME_GIFT_COUNT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0.11111111111111;
P_WEALTH_RATING7 = 0.11111111111111;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0.44444444444444;
P_WEALTH_RATING3 = 0.11111111111111;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0.11111111111111;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0.11111111111111;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0.11111111111111;
Q_WEALTH_RATING7 = 0.11111111111111;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0.44444444444444;
Q_WEALTH_RATING3 = 0.11111111111111;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0.11111111111111;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0.11111111111111;
I_WEALTH_RATING = '1';
U_WEALTH_RATING = 1;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.15745856353591;
P_WEALTH_RATING5 = 0.23204419889502;
P_WEALTH_RATING7 = 0.08839779005524;
P_WEALTH_RATING2 = 0.0732044198895;
P_WEALTH_RATING1 = 0.03591160220994;
P_WEALTH_RATING3 = 0.14779005524861;
P_WEALTH_RATING6 = 0.17403314917127;
P_WEALTH_RATING9 = 0.00966850828729;
P_WEALTH_RATING8 = 0.04419889502762;
P_WEALTH_RATING0 = 0.03729281767955;
Q_WEALTH_RATING4 = 0.15745856353591;
Q_WEALTH_RATING5 = 0.23204419889502;
Q_WEALTH_RATING7 = 0.08839779005524;
Q_WEALTH_RATING2 = 0.0732044198895;
Q_WEALTH_RATING1 = 0.03591160220994;
Q_WEALTH_RATING3 = 0.14779005524861;
Q_WEALTH_RATING6 = 0.17403314917127;
Q_WEALTH_RATING9 = 0.00966850828729;
Q_WEALTH_RATING8 = 0.04419889502762;
Q_WEALTH_RATING0 = 0.03729281767955;
I_WEALTH_RATING = '5';
U_WEALTH_RATING = 5;
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('49' ,'45' ,'.' ,'30' ,'07' ,'41' ,'37' ,'36' ,'48' ,
'08' ,'46' ,'26' ,'21' ,'51' ,'17' ,'39' ,'25' ,'38' ,'29' ,'06' )
THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('20' ,'16' ,'18' ,'19' ,'27' ,'28' ,'44' ,'05' ,
'40' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(REP_SES ) THEN DO;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('3' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('2' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_ATTRIBUTE2 ) THEN DO;
IF PCT_ATTRIBUTE2 < 17.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 17.5 <= PCT_ATTRIBUTE2 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('20' ,'16' ,'18' ,'19' ,'27' ,'28' ,'44' ,'05' ,
'40' ) THEN DO;
P_WEALTH_RATING4 = 0.06896551724137;
P_WEALTH_RATING5 = 0.16413793103448;
P_WEALTH_RATING7 = 0.26482758620689;
P_WEALTH_RATING2 = 0.02068965517241;
P_WEALTH_RATING1 = 0.00689655172413;
P_WEALTH_RATING3 = 0.03172413793103;
P_WEALTH_RATING6 = 0.20689655172413;
P_WEALTH_RATING9 = 0.04413793103448;
P_WEALTH_RATING8 = 0.17931034482758;
P_WEALTH_RATING0 = 0.01241379310344;
Q_WEALTH_RATING4 = 0.06896551724137;
Q_WEALTH_RATING5 = 0.16413793103448;
Q_WEALTH_RATING7 = 0.26482758620689;
Q_WEALTH_RATING2 = 0.02068965517241;
Q_WEALTH_RATING1 = 0.00689655172413;
Q_WEALTH_RATING3 = 0.03172413793103;
Q_WEALTH_RATING6 = 0.20689655172413;
Q_WEALTH_RATING9 = 0.04413793103448;
Q_WEALTH_RATING8 = 0.17931034482758;
Q_WEALTH_RATING0 = 0.01241379310344;
I_WEALTH_RATING = '7';
U_WEALTH_RATING = 7;
END;
ELSE DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0;
P_WEALTH_RATING7 = 0.09090909090909;
P_WEALTH_RATING2 = 0.18181818181818;
P_WEALTH_RATING1 = 0.36363636363636;
P_WEALTH_RATING3 = 0.18181818181818;
P_WEALTH_RATING6 = 0.09090909090909;
P_WEALTH_RATING9 = 0;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0.09090909090909;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0;
Q_WEALTH_RATING7 = 0.09090909090909;
Q_WEALTH_RATING2 = 0.18181818181818;
Q_WEALTH_RATING1 = 0.36363636363636;
Q_WEALTH_RATING3 = 0.18181818181818;
Q_WEALTH_RATING6 = 0.09090909090909;
Q_WEALTH_RATING9 = 0;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0.09090909090909;
I_WEALTH_RATING = '1';
U_WEALTH_RATING = 1;
END;
END;
ELSE DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('49' ,'.' ,'07' ,'08' ,'46' ,'26' ,'21' ,'51' ,'17' ,
'39' ,'38' ,'29' ,'06' ) THEN DO;
P_WEALTH_RATING4 = 0.14117647058823;
P_WEALTH_RATING5 = 0.20392156862745;
P_WEALTH_RATING7 = 0.13725490196078;
P_WEALTH_RATING2 = 0.05882352941176;
P_WEALTH_RATING1 = 0.0392156862745;
P_WEALTH_RATING3 = 0.09411764705882;
P_WEALTH_RATING6 = 0.2078431372549;
P_WEALTH_RATING9 = 0.04313725490196;
P_WEALTH_RATING8 = 0.07058823529411;
P_WEALTH_RATING0 = 0.00392156862745;
Q_WEALTH_RATING4 = 0.14117647058823;
Q_WEALTH_RATING5 = 0.20392156862745;
Q_WEALTH_RATING7 = 0.13725490196078;
Q_WEALTH_RATING2 = 0.05882352941176;
Q_WEALTH_RATING1 = 0.0392156862745;
Q_WEALTH_RATING3 = 0.09411764705882;
Q_WEALTH_RATING6 = 0.2078431372549;
Q_WEALTH_RATING9 = 0.04313725490196;
Q_WEALTH_RATING8 = 0.07058823529411;
Q_WEALTH_RATING0 = 0.00392156862745;
I_WEALTH_RATING = '6';
U_WEALTH_RATING = 6;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.15492957746478;
P_WEALTH_RATING5 = 0.05633802816901;
P_WEALTH_RATING7 = 0.0281690140845;
P_WEALTH_RATING2 = 0.2112676056338;
P_WEALTH_RATING1 = 0.16901408450704;
P_WEALTH_RATING3 = 0.12676056338028;
P_WEALTH_RATING6 = 0.11267605633802;
P_WEALTH_RATING9 = 0.0281690140845;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0.11267605633802;
Q_WEALTH_RATING4 = 0.15492957746478;
Q_WEALTH_RATING5 = 0.05633802816901;
Q_WEALTH_RATING7 = 0.0281690140845;
Q_WEALTH_RATING2 = 0.2112676056338;
Q_WEALTH_RATING1 = 0.16901408450704;
Q_WEALTH_RATING3 = 0.12676056338028;
Q_WEALTH_RATING6 = 0.11267605633802;
Q_WEALTH_RATING9 = 0.0281690140845;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0.11267605633802;
I_WEALTH_RATING = '2';
U_WEALTH_RATING = 2;
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 186.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
186.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 8800 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 8800 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 335.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 335.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(PCT_OWNER_OCCUPIED ) AND
PCT_OWNER_OCCUPIED < 90.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PCT_OWNER_OCCUPIED ) AND
90.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(RECENT_CARD_RESPONSE_PROP ) THEN DO;
IF RECENT_CARD_RESPONSE_PROP < 0.909 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 0.909 <= RECENT_CARD_RESPONSE_PROP THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(RECENT_RESPONSE_PROP ) THEN DO;
IF RECENT_RESPONSE_PROP < 0.771 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 0.771 <= RECENT_RESPONSE_PROP THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0;
P_WEALTH_RATING7 = 0;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0;
P_WEALTH_RATING3 = 0;
P_WEALTH_RATING6 = 0.16666666666666;
P_WEALTH_RATING9 = 0.5;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0.33333333333333;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0;
Q_WEALTH_RATING7 = 0;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0;
Q_WEALTH_RATING3 = 0;
Q_WEALTH_RATING6 = 0.16666666666666;
Q_WEALTH_RATING9 = 0.5;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0.33333333333333;
I_WEALTH_RATING = '9';
U_WEALTH_RATING = 9;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(PCT_ATTRIBUTE2 ) AND
PCT_ATTRIBUTE2 < 1.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PCT_ATTRIBUTE2 ) AND
1.5 <= PCT_ATTRIBUTE2 THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_ATTRIBUTE4 ) THEN DO;
IF PCT_ATTRIBUTE4 < 3 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 3 <= PCT_ATTRIBUTE4 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0;
P_WEALTH_RATING7 = 0.08333333333333;
P_WEALTH_RATING2 = 0.125;
P_WEALTH_RATING1 = 0.08333333333333;
P_WEALTH_RATING3 = 0.04166666666666;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0.125;
P_WEALTH_RATING8 = 0.125;
P_WEALTH_RATING0 = 0.41666666666666;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0;
Q_WEALTH_RATING7 = 0.08333333333333;
Q_WEALTH_RATING2 = 0.125;
Q_WEALTH_RATING1 = 0.08333333333333;
Q_WEALTH_RATING3 = 0.04166666666666;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0.125;
Q_WEALTH_RATING8 = 0.125;
Q_WEALTH_RATING0 = 0.41666666666666;
I_WEALTH_RATING = '0';
U_WEALTH_RATING = 0;
END;
ELSE DO;
IF NOT MISSING(PER_CAPITA_INCOME ) AND
15462.5 <= PER_CAPITA_INCOME THEN DO;
P_WEALTH_RATING4 = 0.18181818181818;
P_WEALTH_RATING5 = 0;
P_WEALTH_RATING7 = 0.27272727272727;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0.09090909090909;
P_WEALTH_RATING3 = 0.09090909090909;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0.09090909090909;
P_WEALTH_RATING8 = 0.18181818181818;
P_WEALTH_RATING0 = 0.09090909090909;
Q_WEALTH_RATING4 = 0.18181818181818;
Q_WEALTH_RATING5 = 0;
Q_WEALTH_RATING7 = 0.27272727272727;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0.09090909090909;
Q_WEALTH_RATING3 = 0.09090909090909;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0.09090909090909;
Q_WEALTH_RATING8 = 0.18181818181818;
Q_WEALTH_RATING0 = 0.09090909090909;
I_WEALTH_RATING = '7';
U_WEALTH_RATING = 7;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.06273062730627;
P_WEALTH_RATING5 = 0.04059040590405;
P_WEALTH_RATING7 = 0.02398523985239;
P_WEALTH_RATING2 = 0.14575645756457;
P_WEALTH_RATING1 = 0.25830258302583;
P_WEALTH_RATING3 = 0.09778597785977;
P_WEALTH_RATING6 = 0.03136531365313;
P_WEALTH_RATING9 = 0.00184501845018;
P_WEALTH_RATING8 = 0.00922509225092;
P_WEALTH_RATING0 = 0.32841328413284;
Q_WEALTH_RATING4 = 0.06273062730627;
Q_WEALTH_RATING5 = 0.04059040590405;
Q_WEALTH_RATING7 = 0.02398523985239;
Q_WEALTH_RATING2 = 0.14575645756457;
Q_WEALTH_RATING1 = 0.25830258302583;
Q_WEALTH_RATING3 = 0.09778597785977;
Q_WEALTH_RATING6 = 0.03136531365313;
Q_WEALTH_RATING9 = 0.00184501845018;
Q_WEALTH_RATING8 = 0.00922509225092;
Q_WEALTH_RATING0 = 0.32841328413284;
I_WEALTH_RATING = '0';
U_WEALTH_RATING = 0;
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
MEDIAN_HOUSEHOLD_INCOME < 236.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) AND
236.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'50' ,'43' ,'45' ,'.' ,'30' ,'41' ,'37' ,
'18' ,'36' ,'48' ,'31' ,'46' ,'51' ,'25' ,'33' ,'38' ,'53' ,'40' ,
'32' ,'47' ,'10' ,'52' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('49' ,'20' ,'16' ,'07' ,'08' ,'19' ,'27' ,
'26' ,'28' ,'21' ,'44' ,'17' ,'39' ,'09' ,'29' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 11155.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 11155.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('3' ,'4' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('2' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CLUSTER_CODE ) THEN DO;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('30' ,'41' ,'08' ,'21' ,'51' ,'09' ,'10' ) THEN
DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('49' ,'43' ,'45' ,'20' ,'16' ,'07' ,'37' ,
'36' ,'48' ,'27' ,'46' ,'26' ,'28' ,'44' ,'17' ,'39' ,'25' ,'38' ,
'29' ,'40' ,'47' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(REP_URBANICITY ) THEN DO;
_ARBFMT_4 = PUT( REP_URBANICITY , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('U' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('R' ,'S' ,'C' ,'T' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0.20537897310513;
P_WEALTH_RATING5 = 0.17359413202933;
P_WEALTH_RATING7 = 0.06356968215158;
P_WEALTH_RATING2 = 0.14180929095354;
P_WEALTH_RATING1 = 0.07579462102689;
P_WEALTH_RATING3 = 0.1760391198044;
P_WEALTH_RATING6 = 0.09046454767726;
P_WEALTH_RATING9 = 0.00244498777506;
P_WEALTH_RATING8 = 0.02689486552567;
P_WEALTH_RATING0 = 0.0440097799511;
Q_WEALTH_RATING4 = 0.20537897310513;
Q_WEALTH_RATING5 = 0.17359413202933;
Q_WEALTH_RATING7 = 0.06356968215158;
Q_WEALTH_RATING2 = 0.14180929095354;
Q_WEALTH_RATING1 = 0.07579462102689;
Q_WEALTH_RATING3 = 0.1760391198044;
Q_WEALTH_RATING6 = 0.09046454767726;
Q_WEALTH_RATING9 = 0.00244498777506;
Q_WEALTH_RATING8 = 0.02689486552567;
Q_WEALTH_RATING0 = 0.0440097799511;
I_WEALTH_RATING = '4';
U_WEALTH_RATING = 4;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.1;
P_WEALTH_RATING5 = 0.09333333333333;
P_WEALTH_RATING7 = 0.04;
P_WEALTH_RATING2 = 0.21333333333333;
P_WEALTH_RATING1 = 0.17333333333333;
P_WEALTH_RATING3 = 0.23333333333333;
P_WEALTH_RATING6 = 0.04666666666666;
P_WEALTH_RATING9 = 0.02;
P_WEALTH_RATING8 = 0.00666666666666;
P_WEALTH_RATING0 = 0.07333333333333;
Q_WEALTH_RATING4 = 0.1;
Q_WEALTH_RATING5 = 0.09333333333333;
Q_WEALTH_RATING7 = 0.04;
Q_WEALTH_RATING2 = 0.21333333333333;
Q_WEALTH_RATING1 = 0.17333333333333;
Q_WEALTH_RATING3 = 0.23333333333333;
Q_WEALTH_RATING6 = 0.04666666666666;
Q_WEALTH_RATING9 = 0.02;
Q_WEALTH_RATING8 = 0.00666666666666;
Q_WEALTH_RATING0 = 0.07333333333333;
I_WEALTH_RATING = '3';
U_WEALTH_RATING = 3;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(LIFETIME_MIN_GIFT_AMT ) AND
LIFETIME_MIN_GIFT_AMT < 19 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(LIFETIME_MIN_GIFT_AMT ) AND
19 <= LIFETIME_MIN_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(FILE_AVG_GIFT ) THEN DO;
IF FILE_AVG_GIFT < 30.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 30.5 <= FILE_AVG_GIFT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_AVG_GIFT_AMT ) THEN DO;
IF LIFETIME_AVG_GIFT_AMT < 30.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 30.5 <= LIFETIME_AVG_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_WEALTH_RATING4 = 0.125;
P_WEALTH_RATING5 = 0;
P_WEALTH_RATING7 = 0;
P_WEALTH_RATING2 = 0;
P_WEALTH_RATING1 = 0.375;
P_WEALTH_RATING3 = 0.25;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0.25;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0;
Q_WEALTH_RATING4 = 0.125;
Q_WEALTH_RATING5 = 0;
Q_WEALTH_RATING7 = 0;
Q_WEALTH_RATING2 = 0;
Q_WEALTH_RATING1 = 0.375;
Q_WEALTH_RATING3 = 0.25;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0.25;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0;
I_WEALTH_RATING = '1';
U_WEALTH_RATING = 1;
END;
ELSE DO;
IF NOT MISSING(PCT_ATTRIBUTE3 ) AND
61.5 <= PCT_ATTRIBUTE3 THEN DO;
P_WEALTH_RATING4 = 0;
P_WEALTH_RATING5 = 0;
P_WEALTH_RATING7 = 0;
P_WEALTH_RATING2 = 0.2;
P_WEALTH_RATING1 = 0.4;
P_WEALTH_RATING3 = 0.2;
P_WEALTH_RATING6 = 0;
P_WEALTH_RATING9 = 0.2;
P_WEALTH_RATING8 = 0;
P_WEALTH_RATING0 = 0;
Q_WEALTH_RATING4 = 0;
Q_WEALTH_RATING5 = 0;
Q_WEALTH_RATING7 = 0;
Q_WEALTH_RATING2 = 0.2;
Q_WEALTH_RATING1 = 0.4;
Q_WEALTH_RATING3 = 0.2;
Q_WEALTH_RATING6 = 0;
Q_WEALTH_RATING9 = 0.2;
Q_WEALTH_RATING8 = 0;
Q_WEALTH_RATING0 = 0;
I_WEALTH_RATING = '1';
U_WEALTH_RATING = 1;
END;
ELSE DO;
P_WEALTH_RATING4 = 0.11469534050179;
P_WEALTH_RATING5 = 0.07048984468339;
P_WEALTH_RATING7 = 0.02986857825567;
P_WEALTH_RATING2 = 0.24731182795698;
P_WEALTH_RATING1 = 0.22341696535244;
P_WEALTH_RATING3 = 0.16009557945041;
P_WEALTH_RATING6 = 0.04659498207885;
P_WEALTH_RATING9 = 0.00358422939068;
P_WEALTH_RATING8 = 0.0179211469534;
P_WEALTH_RATING0 = 0.08602150537634;
Q_WEALTH_RATING4 = 0.11469534050179;
Q_WEALTH_RATING5 = 0.07048984468339;
Q_WEALTH_RATING7 = 0.02986857825567;
Q_WEALTH_RATING2 = 0.24731182795698;
Q_WEALTH_RATING1 = 0.22341696535244;
Q_WEALTH_RATING3 = 0.16009557945041;
Q_WEALTH_RATING6 = 0.04659498207885;
Q_WEALTH_RATING9 = 0.00358422939068;
Q_WEALTH_RATING8 = 0.0179211469534;
Q_WEALTH_RATING0 = 0.08602150537634;
I_WEALTH_RATING = '2';
U_WEALTH_RATING = 2;
END;
END;
END;
END;
END;
END;
****************************************************************;
****** END OF DECISION TREE SCORING CODE ******;
****************************************************************;
*;
* ASSIGN VALUE TO: WEALTH_RATING;
*;
length _format200 $200;
drop _format200;
_format200 = strip(I_WEALTH_RATING);
if _format200="9" then IMP_WEALTH_RATING = 9;
else
if _format200="8" then IMP_WEALTH_RATING = 8;
else
if _format200="7" then IMP_WEALTH_RATING = 7;
else
if _format200="6" then IMP_WEALTH_RATING = 6;
else
if _format200="5" then IMP_WEALTH_RATING = 5;
else
if _format200="4" then IMP_WEALTH_RATING = 4;
else
if _format200="3" then IMP_WEALTH_RATING = 3;
else
if _format200="2" then IMP_WEALTH_RATING = 2;
else
if _format200="1" then IMP_WEALTH_RATING = 1;
else
if _format200="0" then IMP_WEALTH_RATING = 0;
END;
*;
* Drop prediction variables since they are for INPUTS not TARGETS;
* Replace _NODE_ by _XODE_ so it can be safely dropped;
*;
drop
P_INCOME_GROUP7
P_INCOME_GROUP1
P_INCOME_GROUP3
P_INCOME_GROUP4
P_INCOME_GROUP5
P_INCOME_GROUP6
P_INCOME_GROUP2
I_INCOME_GROUP
U_INCOME_GROUP
Q_INCOME_GROUP7
Q_INCOME_GROUP1
Q_INCOME_GROUP3
Q_INCOME_GROUP4
Q_INCOME_GROUP5
Q_INCOME_GROUP6
Q_INCOME_GROUP2
P_REP_SES4
P_REP_SES1
P_REP_SES3
P_REP_SES2
I_REP_SES
U_REP_SES
Q_REP_SES4
Q_REP_SES1
Q_REP_SES3
Q_REP_SES2
P_REP_URBANICITYT
P_REP_URBANICITYC
P_REP_URBANICITYS
P_REP_URBANICITYR
P_REP_URBANICITYU
I_REP_URBANICITY
U_REP_URBANICITY
Q_REP_URBANICITYT
Q_REP_URBANICITYC
Q_REP_URBANICITYS
Q_REP_URBANICITYR
Q_REP_URBANICITYU
P_WEALTH_RATING0
P_WEALTH_RATING8
P_WEALTH_RATING9
P_WEALTH_RATING6
P_WEALTH_RATING3
P_WEALTH_RATING1
P_WEALTH_RATING2
P_WEALTH_RATING7
P_WEALTH_RATING5
P_WEALTH_RATING4
I_WEALTH_RATING
U_WEALTH_RATING
Q_WEALTH_RATING0
Q_WEALTH_RATING8
Q_WEALTH_RATING9
Q_WEALTH_RATING6
Q_WEALTH_RATING3
Q_WEALTH_RATING1
Q_WEALTH_RATING2
Q_WEALTH_RATING7
Q_WEALTH_RATING5
Q_WEALTH_RATING4
;
