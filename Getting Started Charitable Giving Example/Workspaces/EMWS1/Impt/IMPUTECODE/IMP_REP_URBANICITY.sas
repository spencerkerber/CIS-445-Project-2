*;
* IMPUTE VARIABLE: REP_URBANICITY;
*;
length IMP_REP_URBANICITY $4;
label IMP_REP_URBANICITY = 'Imputed: Replacement: URBANICITY';
IMP_REP_URBANICITY = REP_URBANICITY;
if IMP_REP_URBANICITY eq '' then do;
****************************************************************;
****** DECISION TREE SCORING CODE ******;
****************************************************************;
****** LENGTHS OF NEW CHARACTER VARIABLES ******;
LENGTH I_REP_URBANICITY $ 4;
LENGTH U_REP_URBANICITY $ 4;
LENGTH _WARN_ $ 4;
****** LABELS FOR NEW VARIABLES ******;
LABEL P_REP_URBANICITYU = 'Predicted: REP_URBANICITY=U';
LABEL P_REP_URBANICITYR = 'Predicted: REP_URBANICITY=R';
LABEL P_REP_URBANICITYS = 'Predicted: REP_URBANICITY=S';
LABEL P_REP_URBANICITYC = 'Predicted: REP_URBANICITY=C';
LABEL P_REP_URBANICITYT = 'Predicted: REP_URBANICITY=T';
LABEL Q_REP_URBANICITYU = 'Unadjusted P: REP_URBANICITY=U';
LABEL Q_REP_URBANICITYR = 'Unadjusted P: REP_URBANICITY=R';
LABEL Q_REP_URBANICITYS = 'Unadjusted P: REP_URBANICITY=S';
LABEL Q_REP_URBANICITYC = 'Unadjusted P: REP_URBANICITY=C';
LABEL Q_REP_URBANICITYT = 'Unadjusted P: REP_URBANICITY=T';
LABEL I_REP_URBANICITY = 'Into: REP_URBANICITY';
LABEL U_REP_URBANICITY = 'Unnormalized Into: REP_URBANICITY';
LABEL _WARN_ = 'Warnings';
****** TEMPORARY VARIABLES FOR FORMATTED VALUES ******;
LENGTH _ARBFMT_4 $ 4;
DROP _ARBFMT_4;
_ARBFMT_4 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_2 $ 2;
DROP _ARBFMT_2;
_ARBFMT_2 = ' ';
/* Initialize to avoid warning. */
****** ASSIGN OBSERVATION TO NODE ******;
DROP _BRANCH_;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'20' ,'16' ,'07' ,'34' ,'01' ,'09' ,'02' ,'41' ,
'37' ,'15' ,'38' ,'18' ,'36' ,'08' ,'12' ,'35' ,'19' ,'27' ,'40' ,'13' ,
'26' ,'28' ,'21' ,'14' ,'51' ,'44' ,'29' ,'05' ,'17' ,'39' ,'11' ,'33' ,
'47' ,'22' ,'06' ,'32' ,'03' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('49' ,'50' ,'43' ,'53' ,'42' ,'46' ,'45' ,'30' ,'23' ,
'25' ,'48' ,'24' ,'31' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LAST_GIFT_AMT ) THEN DO;
IF LAST_GIFT_AMT < 215 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 215 <= LAST_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(LIFETIME_MAX_GIFT_AMT ) THEN DO;
IF LIFETIME_MAX_GIFT_AMT < 215 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 215 <= LIFETIME_MAX_GIFT_AMT THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('30' ,'23' ,'25' ,'24' ,'31' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('49' ,'50' ,'43' ,'53' ,'42' ,'46' ,'45' ,'48' )
THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(REP_SES ) THEN DO;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('3' ,'1' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('2' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF 15609 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PER_CAPITA_INCOME < 15609 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 1;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 1;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'C';
U_REP_URBANICITY = 'C';
END;
ELSE DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 1;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 1;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'R';
U_REP_URBANICITY = 'R';
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'07' ,'01' ,'09' ,'02' ,'08' ,'27' ,'26' ,'28' ,
'51' ,'44' ,'29' ,'05' ,'17' ,'39' ,'11' ,'33' ,'47' ,'22' ,'06' ,'32' ,
'03' ,'52' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('20' ,'16' ,'34' ,'41' ,'37' ,'15' ,'38' ,'18' ,
'36' ,'12' ,'35' ,'19' ,'40' ,'13' ,'21' ,'14' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_OWNER_OCCUPIED ) THEN DO;
IF PCT_OWNER_OCCUPIED < 65.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 65.5 <= PCT_OWNER_OCCUPIED THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) THEN DO;
IF MEDIAN_HOUSEHOLD_INCOME < 354.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 354.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('04' ,'07' ,'01' ,'09' ,'02' ,'08' ,'05' ,'39' ,'06' ,
'03' ,'10' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('27' ,'26' ,'28' ,'51' ,'44' ,'29' ,'17' ,'11' ,
'33' ,'47' ,'22' ,'32' ,'52' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF 1440 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 1;
END;
ELSE IF MEDIAN_HOME_VALUE < 1440 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(REP_SES ) THEN DO;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('1' ,'4' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('2' ,'3' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('39' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('04' ,'07' ,'01' ,'09' ,'02' ,'08' ,'05' ,'06' ,
'03' ,'10' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PCT_ATTRIBUTE1 ) THEN DO;
IF 6.5 <= PCT_ATTRIBUTE1 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PCT_ATTRIBUTE1 < 6.5 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 1;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 1;
I_REP_URBANICITY = 'T';
U_REP_URBANICITY = 'T';
END;
ELSE DO;
P_REP_URBANICITYU = 1;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 1;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'U';
U_REP_URBANICITY = 'U';
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('27' ,'26' ,'28' ,'51' ,'44' ,'29' ,'33' ,'47' ,
'22' ,'32' ,'52' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('17' ,'11' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(REP_SES ) THEN DO;
_ARBFMT_4 = PUT( REP_SES , $4.);
%DMNORMIP( _ARBFMT_4);
IF _ARBFMT_4 IN ('2' ,'3' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_4 IN ('1' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 1970.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 1970.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 1;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 1;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'S';
U_REP_URBANICITY = 'S';
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('51' ,'44' ,'47' ,'52' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('27' ,'26' ,'28' ,'29' ,'33' ,'22' ,'32' )
THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PER_CAPITA_INCOME ) THEN DO;
IF PER_CAPITA_INCOME < 11036.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 11036.5 <= PER_CAPITA_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 455 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 455 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 1;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 1;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'R';
U_REP_URBANICITY = 'R';
END;
ELSE DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 1;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 1;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'C';
U_REP_URBANICITY = 'C';
END;
END;
END;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_2 = PUT( CLUSTER_CODE , $2.);
%DMNORMIP( _ARBFMT_2);
IF _ARBFMT_2 IN ('34' ,'41' ,'37' ,'38' ,'36' ,'35' ,'40' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_2 IN ('20' ,'16' ,'15' ,'18' ,'12' ,'19' ,'13' ,'21' ,
'14' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOUSEHOLD_INCOME ) THEN DO;
IF MEDIAN_HOUSEHOLD_INCOME < 302.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 302.5 <= MEDIAN_HOUSEHOLD_INCOME THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(MEDIAN_HOME_VALUE ) THEN DO;
IF MEDIAN_HOME_VALUE < 797.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 797.5 <= MEDIAN_HOME_VALUE THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 0;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 1;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 0;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 1;
I_REP_URBANICITY = 'T';
U_REP_URBANICITY = 'T';
END;
ELSE DO;
P_REP_URBANICITYU = 0;
P_REP_URBANICITYR = 0;
P_REP_URBANICITYS = 1;
P_REP_URBANICITYC = 0;
P_REP_URBANICITYT = 0;
Q_REP_URBANICITYU = 0;
Q_REP_URBANICITYR = 0;
Q_REP_URBANICITYS = 1;
Q_REP_URBANICITYC = 0;
Q_REP_URBANICITYT = 0;
I_REP_URBANICITY = 'S';
U_REP_URBANICITY = 'S';
END;
END;
END;
****************************************************************;
****** END OF DECISION TREE SCORING CODE ******;
****************************************************************;
*;
* ASSIGN VALUE TO: REP_URBANICITY;
*;
length _format200 $200;
drop _format200;
_format200 = strip(I_REP_URBANICITY);
if _format200="U" then IMP_REP_URBANICITY = "U   ";
else
if _format200="T" then IMP_REP_URBANICITY = "T   ";
else
if _format200="S" then IMP_REP_URBANICITY = "S   ";
else
if _format200="R" then IMP_REP_URBANICITY = "R   ";
else
if _format200="C" then IMP_REP_URBANICITY = "C   ";
END;
